分类号 编号
U D C 密级
本科生毕业设计（论文）
题 目： 基于生活模式的城市个体轨迹生成
姓 名： 徐剑
学 号： 12010923
系 别： 计算机科学与工程系
专 业： 计算机科学与技术
指导教师： 宋轩 副教授
2024 年 6 月 7 日
诚信承诺书
1. 本人郑重承诺所呈交的毕业设计（论文），是在导师的指导下，
独立进行研究工作所取得的成果，所有数据、图片资料均真实可靠。
2. 除文中已经注明引用的内容外，本论文不包含任何其他人或
集体已经发表或撰写过的作品或成果。对本论文的研究作出重要贡
献的个人和集体，均已在文中以明确的方式标明。
3. 本人承诺在毕业论文（设计）选题和研究内容过程中没有抄袭
他人研究成果和伪造相关数据等行为。
4. 在毕业论文（设计）中对侵犯任何方面知识产权的行为，由本
人承担相应的法律责任。
作者签名:
2024 6 7
年 月 日
基于生活模式的城市个体轨迹生成
徐剑
（计算机科学与工程系 指导教师：宋轩）
[摘要]：人类流动性数据对于交通规划和拥堵管理至关重要。然而，由
于隐私问题和数据质量问题（如冗余、缺失值和噪声），获取和利用原始
轨迹数据存在持续的挑战。本论文介绍了一种创新的基于地理信息系统
(GIS) 的框架，用于在城市尺度上创建个人层面的长期时空流动性数据。
该方法通过关键位置（活动发生的地方）和描述这些位置之间转换的生
活模式来分解和表示个体流动性。然后，本论文提出了从大规模人类流
动性数据中提取、表示和生成关键位置和生活模式的方法。通过使用上
海的长期轨迹数据来提取生活模式和关键位置，成功地将所提出的方法
应用于在上海生成 30,000 个虚拟用户的 7 天流动性。通过测试不同区域
的关键位置和生活模式的组合，模型展示了在城市内不同区域之间以及
不同城市之间强大的可转移性。通过测试生成的流动性数据的代表性，本
论文发现使用生成的个体流动性的大约 0.25% 就足以代表整个城市人口
的日常和每小时的动态变化。所提出的方法提供了一种新工具，用于在
个人层面生成长期的时空流动性模式，为城市管理者、规划者和政策制
定者提供了宝贵的工具，以应对城市化过程中日益增长的交通挑战。
[关键词]：个体流动性生成，生活模式，出行模式，地理信息系统，人
类流动性.
I
[ABSTRACT]: Human mobility data is indispensable for urban transporta-
tion planning and congestion management. However, accessing and utilizing
rawtrajectorydatapresentssignificantchallenges,primarilyduetoprivacycon-
cerns and data quality issues such as redundancy, missing values, and noise.
This thesis introduces an innovative GIS-based framework designed to create
individual-level long-term spatio-temporal mobility data at a city scale.
The methodology is grounded in the decomposition and representation
of individual mobility through key locations where daily activities occur and
life patterns that describe transitions between these locations. The framework
presents advanced methods for extracting, representing, and generating key lo-
cations and life patterns from large-scale human mobility data.
Taking long-term trajectory data from Shanghai as a case study, the pro-
posed methodology was successfully applied to generate the mobility patterns
of30,000virtualusersoveraseven-dayperiodinShanghai. Themodeldemon-
strated strong transferability between various areas within cities and across dif-
ferent cities, as evidenced by the successful combination of key locations and
life patterns from different regions.
Furthermore, the representativeness of the generated mobility data was
tested, revealing that utilizing only about 0.25% of the generated individual
mobilities is sufficient to represent the dynamic changes of the entire urban
population at daily and hourly resolutions. This finding underscores the effi-
ciency and effectiveness of the proposed methodology.
The framework offers a vital tool for city officials to understand and man-
age long-term human mobility patterns, essential for addressing urban trans-
portation challenges. It empowers them to make informed decisions and de-
velop effective transportation strategies.
[Key words]: Individual mobility generation, Life pattern, Travel pattern,
GIS, Human mobility
II
目录
1. 引言 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
1.1 背景 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
1.2 目前轨迹生成模型存在的问题 . . . . . . . . . . . . . . . . . . . . . . 2
1.3 基于生活模式的框架用于城市规模的个体层面空间-时间移动性 2
2. 基础理论及相关工作 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
2.1 轨迹生成模型的基础理论 . . . . . . . . . . . . . . . . . . . . . . . . . 4
2.2 相关工作 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
3. 设计、研究方法 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
3.1 初步研究 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
3.1.1 长期移动性生成的应用场景 . . . . . . . . . . . . . . . . . . . . . . . 9
3.1.2 长期个体移动性的表示 . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3.2 方法 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.2.1 长期移动性生成框架 . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.2.2 提取和表示关键位置 . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
3.2.3 关键位置生成 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
3.2.4 生活模式的提取与表示 . . . . . . . . . . . . . . . . . . . . . . . . . . 16
3.2.5 基于矩阵分解的生活模式生成 . . . . . . . . . . . . . . . . . . . . . 17
3.2.6 从关键地点和生活方式模式生成长期个体移动性 . . . . . . . . . 19
4. 结果与分析 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
4.1 数据和研究区域 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
III
4.2 结果以及分析 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
4.2.1 从个体到城市规模动态的移动性生成 . . . . . . . . . . . . . . . . 21
4.2.2 个体生活模式的迁移能力 . . . . . . . . . . . . . . . . . . . . . . . . 23
4.2.3 生成移动性的代表性表现 . . . . . . . . . . . . . . . . . . . . . . . . 26
5. 总结 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
参考文献 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
致谢 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
IV
1. 引言
1.1 背景
智能手机的广泛普及和设备信号数据的可获取性，为深入理解个体移动特征提
供了前所未有的机会。这些数据不仅详尽地记录了用户的日常出行行为，而且在住宅
出行调查和交通需求预测等关键领域扮演着核心角色[1-2]。通过整合和分析来自不同
来源的数据，研究者能够对个体的出行模式进行精确分析，从而推动多尺度、时空交
通需求分析和预测的发展[3-4]。人类移动数据对于城市交通规划、传染病传播的预测
与模拟、犯罪风险评估以及人群聚集预警和疏散规划等应用领域具有不可估量的价
值[5-6]。
然而，尽管现代信息通信技术（ICT）的发展极大地便利了大规模个体移动定位
数据的收集，原始轨迹数据的可用性和实用性仍然面临挑战。这些数据常常涉及个人
隐私问题，并且可能包含冗余信息、缺失值和噪声，这些都可能影响数据的准确性和
可靠性[7]。在《自然》杂志上发表的一篇展望文章“合成数据可能比真实数据更好”
中，作者强调了机器生成数据集在保护隐私和解决数据偏斜问题方面的巨大潜力[8]。
这篇文章提倡研究人员和公众接受并拥抱数据生成技术及其带来的深远影响，这不
仅有助于推动科学研究的进步，也为社会管理和决策提供了新的视角和工具。
在城市规划方面，合成数据可以帮助模拟不同交通策略的效果，从而在实际实施
前进行评估和优化。例如，通过模拟不同交通流量和人群分布情况，城市规划者可以
预测交通拥堵点，优化公共交通网络，甚至预测和规划城市扩张。在公共卫生领域，
合成数据可以用于模拟传染病的传播路径，帮助制定有效的预防措施和应急响应计
划。在犯罪风险评估中，合成数据可以用来分析犯罪模式，预测高风险区域，从而指
导资源的合理分配和预防策略的制定。
随着合成数据技术的不断进步，我们有望在不侵犯个人隐私的前提下，获得更加
丰富和精确的数据资源，从而为城市规划、公共安全和应急响应等领域提供更加有力
的支持。
1
1.2 目前轨迹生成模型存在的问题
当前的移动性生成模型主要集中在预测区域间的聚合移动流量（OD 预测），而
对生成个体级别的、长时间连续的移动任务关注不足。此外，这些模型通常缺乏足够
的空间泛化和迁移能力，这给在不同情境下准确模拟个体移动性带来了挑战。
具体来说，现有的模型往往侧重于预测不同区域之间的移动流量，而忽略了对个
体层面长时间连续移动行为的模拟。这种偏重于宏观层面的预测，导致了对个体行为
细节的关注不足，从而无法充分捕捉到个体在日常生活中复杂多变的移动模式。例
如，模型可能无法准确预测个体在特定时间点的移动目的地，或者无法模拟个体在特
定情境下的行为选择，如在节假日或特殊事件期间的出行模式。
此外，现有的移动性生成模型在空间泛化和迁移能力方面存在不足。这意味着，
当模型被应用于新的地理区域或不同的社会文化背景时，其预测的准确性可能会显
著下降。这种局限性限制了模型在不同城市或国家之间进行有效迁移和应用的能力，
从而影响了模型在更广泛场景下的实用性和有效性。
为了克服这些挑战，一些研究开始关注个体的旅行模式，并揭示了个人移动性中
的显著规律性。研究者们尝试从真实轨迹数据中提取和分类存在的模式，这些模式可
以为个体移动性的生成提供重要的见解。例如，通过分析个体在不同时间、地点的行
为模式，研究者可以识别出个体移动的周期性和模式性，从而为生成更加真实和复杂
的个体移动轨迹提供依据。
随着个体级别的时空数据的出现，以及深度学习、多智能体模拟和人工智能生成
内容（AIGC）模型等关键技术的发展，为解决这一领域的挑战和突破瓶颈提供了可
靠的支撑和帮助。这些技术的进步不仅提高了数据处理的速度和质量，也为城市管理
者提供了更加精细的决策支持工具。例如，深度学习模型能够从大量数据中学习到复
杂的模式和关系，而多智能体模拟则能够模拟个体之间的相互作用和影响，从而为个
体移动性的生成提供更加真实和动态的模拟。
1.3 基于生活模式的框架用于城市规模的个体层面空间-时间移动性
本研究成功构建了一个基于地理信息系统（GIS）的先进框架，致力于在宏观城
市层面上合成个体级别的长期空间-时间移动性数据。该框架创新性地采用了关键位
2
置和生命模式的双重概念来详细分解与表示个体的移动性特征。其中，关键位置是指
个体进行各种活动的具体地点，而生命模式则是指个体在这些关键位置之间的转换
和移动规律。本研究的方法论涵盖了一整套从大规模人类移动性数据中提取、表示及
生成关键位置和生命模式的技术和流程。
以上海市的长期移动性轨迹数据为研究对象，我们有效地应用了所提出的框架，
成功地为 30,000 名虚拟用户合成了一周内的移动性模式。本研究进一步通过实验验
证了模型的可转移性，即不同城市区域间乃至不同城市间的关键位置和生命模式的
组合使用，展现了模型的强大适应性和广泛应用潜力。尤为重要的是，我们通过对比
测试生成的移动性数据与实际城市人口的动态变化，发现仅需使用生成数据中的一
小部分（大约0.25%）即可准确反映整个城市人口的日常活动和小时级别的移动性变
化。
本研究的主要贡献可以概括为以下几点：
• 本研究创新性地提出了一个基于 GIS 的框架，该框架专门用于生成城市规模的
个体长期空间-时间移动性数据，为城市规划和交通管理提供了新的研究工具。
• 我们开发了一套从大规模人类移动性数据中高效提取关键位置和生命模式的方
法，并利用这些信息来生成虚拟个体的移动性轨迹，这一方法为个体行为模拟
提供了新的可能。
• 通过一系列的实验，我们验证了所合成数据的高代表性和准确性，证明了合成
数据在城市交通规划和管理决策中的重要应用价值和实用潜力。
• 本研究展示了模型在城市不同区域以及跨城市环境中的强可转移性，证实了该
模型在多样化应用场景中的稳定性和可靠性。
• 通过与实际移动性数据的细致比较，本研究的方法论展示了合成数据与现实世
界观测值间的高度一致性，增强了合成数据在现实世界问题中应用的信心。
• 本研究的方法论为城市管理者、规划者和政策制定者提供了一种新的工具，帮
助他们更有效地应对快速城市化过程中日益增长的交通挑战。
3
• 通过合成数据技术，本研究为在不侵犯个人隐私的前提下，获取更加丰富和精
确的数据资源提供了可能，为城市规划、公共安全和应急响应等领域提供了强
有力的数据支持。
总体而言，本研究不仅在理论和方法上提供了创新，而且在实践应用中展现了显
著的价值和潜力，为未来城市尺度的移动性研究和相关领域的决策提供了宝贵的数
据资源和分析工具。
2. 基础理论及相关工作
2.1 轨迹生成模型的基础理论
轨迹生成模型在交通工程和城市规划领域扮演着至关重要的角色，它涉及创建
或模拟个体或车辆在特定时间内的移动路径。这一模型不仅在理论构建上体现了多
学科的交叉融合，而且在实际应用中也展现了跨学科的综合优势。以下是轨迹生成模
型的几个基础理论要点，它们共同构成了这一模型的理论基础：
• 随机性理论：考虑出行行为的不确定性，如个人偏好、天气条件、交通状况等。
在轨迹生成模型中，随机性理论允许模拟出行者在面对不同选择时的随机决策
行为。例如，出行者可能会根据天气变化选择不同的出行模式或路线。
• 行为模型：基于个体出行决策的理解，包括出行目的、时间、路线选择等。行为模
型通过分析出行者的选择逻辑，预测其在不同情境下的出行行为。这些模型可
以是定性的，也可以是基于统计的定量模型，如基于选择的模型（Choice-based
models）和基于活动的模型（Activity-basedmodels）。
• 网络流理论：模拟交通流在路网中的分布和移动，考虑路网拓扑结构、交通容
量和车辆相互作用。网络流理论是轨迹生成模型的核心，它通过分析路网中的
交通流量和流向，预测交通拥堵和延误。
• 活动基础模型（Activity-Based Modeling, ABM）：考虑个体的日常活动模式及
其对出行需求的影响。ABM模型通过模拟个体的日常活动安排，如工作、购物、
休闲等，来预测出行时间和频率。
4
• 代理模型（Agent-Based Modeling, ABM）：通过模拟个体（代理）的决策过程
来生成轨迹。在代理模型中，每个出行者被视为一个独立的决策者，他们根据
自己的目标、约束和行为规则来选择出行路径。
• 空间相互作用模型：基于地理空间分析，考虑不同地点之间的相互作用。这些
模型通常使用引力模型来描述地点间的相互作用，如人口迁移和商品流通。
• 时间地理学：强调时间和空间在人类活动中的角色，分析个体的时间约束和空
间可达性。时间地理学通过分析个体在时间和空间上的活动范围，来预测其出
行行为。
• 数据驱动方法：利用大量实际轨迹数据，通过机器学习技术预测和生成新的轨
迹。数据驱动方法通过分析历史轨迹数据，建立预测模型，以生成新的轨迹。
• 多模式交通：考虑多种交通方式的转换，如步行、自行车、公共交通和私家车
等。在现代城市交通系统中，轨迹生成模型需要考虑不同交通模式之间的转换，
以更准确地模拟出行行为。
轨迹生成模型的理论基础是多学科交叉的，它融合了交通工程、行为科学、地理信息
科学、计算机科学等多个领域的理论和方法，形成了一个综合性的研究框架。这一框
架不仅为交通系统的运行提供了深入的分析工具，而且为城市规划和交通管理提供
了科学的决策支持。
在交通工程领域，轨迹生成模型借鉴了交通流理论、交通需求分析、交通分配模
型等基本原理，这些原理为模型提供了分析和预测交通行为的基础框架。通过这些原
理，研究者能够理解交通流的动态变化，预测交通拥堵的形成，以及评估交通基础设
施的效率。
行为科学的视角为轨迹生成模型提供了个体移动行为的微观分析。个体的移动
决策受到多种因素的影响，包括个人偏好、社会经济状态、文化背景等。行为科学的
理论和方法帮助我们理解这些因素如何影响个体的移动决策，从而在轨迹生成模型
中更准确地模拟个体行为。
5
地理信息系统（GIS）技术在轨迹生成模型中扮演着核心角色。GIS 能够处理和
分析与地理位置相关的数据，将个体的移动路径与地理环境相结合，分析移动模式与
地理特征之间的关系。通过GIS，研究者可以识别出交通热点区域，预测交通流量分
布，以及评估交通网络的连通性。
计算机科学的方法为轨迹生成模型提供了强大的数据处理和分析工具。随着大
数据时代的到来，计算机科学的算法和模型能够处理和分析大规模的移动数据，提取
有价值的信息，为交通管理和城市规划提供科学依据。例如，机器学习和深度学习技
术能够从历史数据中学习模式，预测未来的交通流量，甚至模拟个体的移动行为。
此外，轨迹生成模型还涉及到数据隐私和安全的问题。在处理和分析个人移动数
据时，研究者必须遵守相关的隐私保护法规，确保个人数据的安全。这要求模型在设
计时必须考虑到数据的匿名化和加密技术，以防止个人隐私的泄露。
综上所述，轨迹生成模型的理论基础是多学科交叉的，它结合了交通工程、行为
科学、地理信息科学、计算机科学等多个领域的理论和方法。通过这些理论，研究者
和规划者可以更好地理解和预测交通系统的运行状态，为交通管理和城市规划提供
科学依据。同时，模型的设计和应用也必须考虑到数据隐私和安全的问题，以确保研
究的合法性和道德性。随着技术的不断进步和数据的日益丰富，轨迹生成模型将在未
来的交通管理和城市规划中发挥越来越重要的作用。
2.2 相关工作
在过去的几十年中，随着科技的进步和数据收集手段的多样化，研究者们已经能
够利用各种轨迹数据来深入探索和分析人类的旅行模式。这些数据类型包括传统的
旅行调查、现代的 GPS 数据以及通过智能手机收集的数据。每种数据类型都有其独
特的优势和局限性，但它们共同为理解人类移动性提供了宝贵的信息。
传统的旅行调查数据，通常是通过人口普查或面对面访谈的方式收集的，能够提
供非常详尽的旅行信息。这些信息包括旅行的起点和终点、出行的时间、出行的目的
以及所采用的出行方式等。例如，Lidbe,A通过分析2001年和2017年美国国家公路
交通调查（NHTS）数据，对老年人的长途旅行模式进行了深入研究。这项研究特别
关注了社会人口统计特征以及这些特征如何影响旅行行为[9]。通过这种方法，研究者
6
能够识别出老年人群体中存在的特定旅行需求和挑战，为改善交通系统提供了有价
值的见解。
然而，传统的调查方法存在一些明显的局限性。首先，它们通常成本高昂，需要
大量的人力和物力投入。其次，这些数据往往是非实时的，无法反映最新的旅行模式
变化。因此，研究者们开始探索替代的数据收集方法，其中最引人注目的是 GPS 日
志。
GPS日志能够提供时间、位置、海拔、方向和速度等丰富的信息，这些信息对于
深入研究旅行行为至关重要。Wang,S利用GPS数据和网络分析技术，揭示了人类移
动的模式和规律[10]。通过分析个体的移动轨迹，研究者能够识别出常见的旅行路径
和行为模式，这对于交通规划和管理具有重要意义。然而，GPS 数据也有其局限性，
尤其是在社会人口统计信息的收集方面，这些信息可能不够完整或准确。
为了克服这一挑战，研究者们开始利用智能卡数据来补充 GPS 数据。智能卡数
据通常包含丰富的交易和旅行细节，如乘坐公共交通的时间、地点和频率等。这些数
据对于交通建模和分析非常有用。例如，Jiang,B分析了斯德哥尔摩的公共交通习惯，
他使用了三百万智能卡持有者的数据，通过 K-means 聚类和高斯模型，识别出了 10
种不同的旅行模式[11]。这些模式揭示了不同群体在公共交通使用上的偏好和行为差
异，为优化公共交通服务提供了有力的数据支持。
随着智能手机的普及和移动通信技术的飞速发展，手机数据已成为研究个体和
集体移动模式的重要资源。手机数据不仅包括了用户的位置信息，还涵盖了通话记
录、时间戳和日期等详细信息，这些信息的连续性和客观性为分析提供了坚实的基础。
这种数据的广泛性和连续性使得手机数据在理解人类移动行为方面具有独特的优势，
尤其是在分析个体的日常出行模式和集体的移动趋势方面。例如，Marta C. González
的研究展示了如何利用来自 10 万手机用户的六个月的详细数据来深入研究人类的常
规移动模式[12]。这项研究不仅揭示了个体在不同时间段的移动规律，还为理解城市
居民的日常活动模式提供了宝贵的见解。通过分析这些数据，研究者能够识别出个
体的出行模式，如通勤、购物、休闲等，并且能够捕捉到这些模式随时间的变化。此
外，Kung K S 的研究利用手机通话详细记录（CDR）来识别个体的工作和家庭位置，
7
并通过分析通话时间来推断个体的睡眠模式，进而探索了曼谷的人口分布和通勤模
式[13]。这项研究强调了个体在长期旅行行为中经常表现出的一致模式，这些模式是
预测人类移动模式和生成轨迹的基础
预测个体移动轨迹的研究可以分为传统方法和深度学习模型[14-15]。传统模型使
用时间序列模型来捕捉时间和空间的转换，但往往只能捕捉到浅层数据，导致差异。深
度学习，特别是循环神经网络（RNNs），因其能够处理复杂序列而受到关注[16]。一个通
用的RNN架构模拟了稀疏用户轨迹[17]。深度基于空间时间的变换网络（DWSTTNs）
编码了语义位置的地理信息，预测了精确坐标和下一个目的地[18]。DeepJMT模型，一
个上下文感知的深度学习模型，结合了分层RNNs、空间和周期性上下文提取器，以
及社会和时间共同注意力机制，用于同时预测下一个位置和到达时间[19]。
对于生成个体轨迹数据的研究，包括机制模型和机器学习方法。机制模型定量分
析了时空事件，建立了如探索和偏好返回模型等模型。Song et al 提出了机器学习方
法，从真实数据中学习，但在早期方法如马尔可夫模型中面临限制[20]。深度学习方
法，如长短期记忆（LSTM），解决了梯度消失问题。生成对抗网络（GANs）、变分
自编码器（VAEs）以及扩散模型被引入以生成真实的轨迹数据。TrajGen使用GANs
和Seq2Seq模型生成人工轨迹数据集，同时保留了关键的统计特性[21]。Longetal. 提
出了一个轨迹生成器，结合了用户 VAE 和轨迹 VAE，集体捕获用户分布并模拟复杂
的个体移动模式[22]。Zhu et al. 应用扩散模型通过前向和反向过程从真实数据的时空
特征中生成高质量轨迹[23]。轨迹生成有效地解决了数据隐私问题，但在大规模城市
级别的应用中仍面临挑战。
尽管当前的轨迹预测技术已经取得了显著的研究进展，并且在交通需求分析应
用中展现出巨大的潜力，但现有的模型仍面临若干挑战，需要进一步的改进和完善。
首先，预测长期时空轨迹是一个重大的技术难题。目前的研究主要集中在利用个体的
时空位置信息序列来预测下一个位置，这种基于序列的方法虽然在短期内有效，但其
适用性在长期预测中受到限制，因为它们往往无法充分捕捉到个体移动行为的复杂
性和多样性。其次，大规模城市个体旅行预测和交通需求分析的实际应用仍然存在局
限性。在复杂的都市环境中，多变的交通条件和不断变化的城市结构为处理大规模数
8
据集的预测模型带来了巨大的挑战。这些挑战包括但不限于数据的异质性、噪声的处
理、以及模型对不同城市环境的适应性等。为了填补这些研究空白，我们的研究工作
致力于将多源大数据与先进的深度学习技术相结合，以实现对城市人口时空动态分
布和个体旅行轨迹的准确预测。我们提出的框架不仅能够处理大规模数据集，还能够
适应不同城市环境的复杂性，从而提供更为精细和准确的预测结果。我们的研究重点
是提供关键城市区域交通需求的详细预测和深入分析。通过这种精细化的预测，我们
能够为城市交通规划和管理提供实时的决策支持。这包括但不限于优化公共交通路
线、调整交通信号控制、规划城市基础设施建设，以及应对紧急情况等。我们的目标
是通过这些预测和分析，帮助城市管理者和规划者做出更加明智的决策，以提高城市
交通系统的效率和可持续性。此外，我们的研究还强调了数据隐私和安全的重要性。
在处理和分析个人移动数据时，我们采取了严格的数据保护措施，确保了个人隐私不
被侵犯。通过这种方式，我们不仅推动了技术的发展，也维护了社会的信任和伦理标
准。总之，我们的研究工作旨在通过创新的技术和方法，解决现有模型在预测长期时
空轨迹和大规模城市个体旅行预测中的局限性，为城市交通规划和管理提供更为精
确和实用的决策支持。我们相信，通过不断的研究和技术创新，我们能够为建设更加
智能、高效和可持续的城市环境做出贡献。
3. 设计、研究方法
3.1 初步研究
3.1.1 长期移动性生成的应用场景
长期个体层面移动性数据的生成是一个复杂的过程，涉及时间和空间维度的连
续性和复杂性。目前，关于长期个体层面移动性生成的研究有限，现有的研究在模型
输入和输出之间存在显著差异，这给准确生成轨迹数据带来了挑战。作为初步研究，
本文定义了两个主要的应用场景，并分析了它们各自的特征和要求：
场景一：移动性去标识化和数据扩展
原始的个体移动性数据包含高度敏感的个人隐私信息，并在大多数国家和地区
受到严格监管。同时，由于数据收集方法和移动运营商市场份额的限制，通常难以获
取城市中所有个体的移动数据。因此，需要从样本集中进行移动性去标识化和数据扩
9
图1 基于个体关键位置和生活模式的移动性生成概念
展，以覆盖整个群体。在这个应用场景中，移动性生成的目的是从真实轨迹数据中提
取非敏感信息，同时保留轨迹信息的核心特征，以便在时间和空间聚合级别上接近真
实数据。生成的轨迹可以用来分析真实个体的出行需求和移动行为，这对城市规划和
交通管理具有重要意义。
场景二：跨区域迁移生成
获取真实的个体移动数据往往具有挑战性。在原始轨迹数据不可用的区域，可以
在其他地方训练的轨迹生成模型可以用来为这些区域生成数据。这类任务通常依赖
于基础设施分布、兴趣点（POI）、土地使用、交通调查和人口普查等输入数据来生成
合成轨迹。这些输入数据的质量和完整性直接影响生成轨迹的时空准确性。因此，有
效利用这些数据并增强模型处理这些数据的能力，成为跨区域迁移生成任务的关键
方面。
模型的输入根据这两种场景而变化。本研究的目的是提出一个能够适应这两种
场景分辨率的长期移动性生成框架。在所提出的框架中，生成轨迹的质量取决于输入
数据的丰富性。当使用真实轨迹数据训练模型时，模型能够产生在聚合级别上与真实
轨迹非常相似的合成轨迹。
3.1.2 长期个体移动性的表示
关键位置是理解个体移动性的基础，作为日常生活中的关键锚点。这个概念与
G.Golledge在1978年提出的“锚点理论”相呼应，该理论解释了人类活动空间的形
成和机制[24]。根据这一理论，在不熟悉的环境中，如新城市，个体最初会寻找主要节
点，如住房和工作场所——这些是他们的锚点。随后，次要节点和连接它们的路径，
如上班的路线或家周围的设施，被识别并纳入他们的活动空间。这个过程逐渐扩展并
10
图2 方法论框架
丰富了他们的活动空间，最终形成了一个分层的认知结构。关键位置因此不仅仅是孤
立的点，而是个体理解和导航其环境的核心。它们定义了活动的主要上下文——如家
庭、工作、娱乐、商务等——并且对每个个体都具有内在的关联性。
生活模式则探讨了日常例行公事的流动性，捕捉个体随时间在关键位置之间转
换的方式。这些模式在理解个人移动性方面至关重要，因为它们不仅包含了物理移
动，还包括指导这些移动的潜在行为和决策。生活模式反映了个人日常例行公事的复
杂性，从选择路线和移动时间到访问某些地点的频率。例如，个体在给定时间从A类
型位置（例如家）移动到B类型位置（例如工作）的概率，展示了生活模式在日常例
行公事中的预测方面。
关键位置和生活模式的结合，为个体长期旅行行为模式提供了一个全面的表达，
封装了城市环境中的个人移动性的本质（参见图1）。
3.2 方法
3.2.1 长期移动性生成框架
针对前面提到的两种场景，本论文设计了一个长期移动性生成算法。本研究的模
型分为三个模块：
1. 模块1，关键位置与生活模式提取：将实际移动性提取为停留点（关键位置）和
活动模式（生活模式）的结构化表示。
11
2. 模块2，关键位置与生活模式生成：使用辐射模型生成关键位置和使用SVD降
维采样生成生活模式，为虚拟个体生成关键位置和生活模式。
3. 模块3，移动性重建：从关键位置和生活模式重建完整的长期虚拟移动序列。
整个模型框架如图2所示。对于场景1，过程涉及模块1+模块3，其中从实际数
据中提取关键位置和生活模式，然后进行采样和组合以创建虚拟移动数据。至于场景
2，过程涉及模块2+模块3，其中需要为新城市重新生成关键位置和生活模式，然后
从生成的信息中进行采样和组合以创建虚拟移动数据。
在这个框架下，模型结构灵活且可转移，能够根据输入数据的质量进行调整，并
具有很强的可解释性。通过结合这三个模块，可以有效地完成两种不同场景下的轨迹
生成任务。
3.2.2 提取和表示关键位置
如前文所述，关键位置是个人日常生活中主要的锚点，界定了活动的主要环境。
在本文中，本论文将关键位置定义为家庭（Home）、工作（Work）和其他（Others）
的组合。这里，本论文介绍了一种基于规则的方法来识别个人的家庭、工作和其他
位置。识别过程遵循人类移动数据分析中已建立的方法[25-26]。其基本原理如图3(a)所
示，识别过程如下：
1. 家庭（H）：在观察期间，用户平均夜间（从晚上20:00到第二天早上08:00）停
留时间超过或等于5小时的地点，且在2/3天内满足此条件。
2. 工作（W）：在工作日，用户平均白天（从早上08:00到晚上20:00）停留时间超
过180分钟的地点，且该地点不在居住地内。
3. 其他（O）：用户停留时间超过30分钟的地点，除了家庭和工作地点之外。
例如，在图3(b)中，基于一个月内两个手机用户的活动，展示了家庭和工作地点
的识别结果，每种不同的颜色代表一个独特的地点。值得注意的是，这个框架也适用
于可能存在多个居住地、工作地和其他区域的情况。在本研究的算法测试阶段，我们
12
图3 关键位置识别
保持用户可能有最多 5 个家庭位置、5 个工作位置和 10 个其他位置。当有进一步需
求时，可以进一步扩展关键位置的类型和数量。
家庭和工作地点的识别算法在Python包TransBigData[27]中提供。
3.2.3 关键位置生成
在轨迹生成任务中，每个生成的个体可以从这个分布中采样其家庭、工作和其他
地点的关键位置。
关键位置信息涉及家庭、工作和其他地点的单概率和联合概率分布。这些概率可
以通过交通调查、兴趣点（POI）、土地使用、道路网络、交通线路网络以及其他基础
设施和热数据来估计。关键位置估计的质量随着所使用的基础数据集的不同而变化。
在本研究中，关键位置的生成分为两个步骤：
单分布概率生成：使用回归方法来估计家庭、工作或其他地点的单分布概率。通
过分析城市网格中的 POI 和热数据等基础数据，通过回归模型来估计家庭、工作和
其他地点的分布。
联合分布概率生成：使用辐射模型来生成家庭、工作和其他组合的联合概率分
布。这涉及到通过辐射模型估计家庭、工作和其他地点之间的成对联合分布，从而从
13
图4 基于辐射模型的关键位置分布估计
HW、HO 和WO的个体分布中推导出整体联合分布。
整体方法如图4所示。
为了估计在给定位置的单一分布概率，即家庭（Home）、工作（Work）和其他
（Others），设 X 为该位置的特征向量（例如，兴趣点（POI）、人口密度、土地使用、
道路网络等）。函数 P (i)、P (i) 和 P (i) 分别表示网格 i 被分类为家庭、工作和其
H W O
他地点的概率。回归模型可以表示为：
F (i) = f (X ;θ ) (1)
H H i H
F (i) = f (X ;θ ) (2)
W W i W
F (i) = f (X ;θ ) (3)
O O i O
F (i)
P H
P (i) = (4)
H
F (j)
j H
F (i)
P W
P (i) = (5)
W
F (j)
j W
14
F (i)
P O
P (i) = (6)
O
F (j)
j O
在这里，f 、f 和f 是回归模型函数，而θ 、θ 和θ 是模型参数。通过这
H W O H W O
种方法，本项目可以根据城市基础数据预测任何地点成为住宅、工作场所或其他地点
的可能性。
对于联合分布概率生成，建立了一个辐射模型来进行估计。辐射模型是一个数学
框架，用于预测人口流动、通勤模式和交通流量（在《自然》杂志的一篇论文中有所
引用）。该模型基于个体在不同地点之间移动的随机决策过程，考虑了人口分布、就
业机会和涉及的距离等因素。模型的核心方程如下：
F (i)F (j)
H W
F (i,j) = F (7)
HW i
(F (i)+s )(F (i)+F (j)+s )
H ij H W ij
其中，F 代表在位置i需要外出工作的人数，可以表示为：
i
P
F (j)
F = F (i)
Pj W
(8)
i H
F (i)
i H
其中，F (i,j) 代表从家庭位置 i 到工作位置 j 的通勤流量，而 s 代表以 i 为
HW ij
中心，半径为r 的圆形区域内所有就业机会的总数，不包括i和j 的机会。
ij
在辐射模型中，s 表示在i和j 两点之间的圆形区域内的人口总数，半径为r ，
ij ij
不包括源点i和终点j 的机会。这个术语代表了在源位置i一定距离内可用的潜在就
业机会，这被认为会影响通勤流量F (i,j)。
HW
辐射模型的基本概念在于个体在选择通勤目的地时会考虑周围地区的就业机会。
模型假设每个地点的就业机会数量与居民人口成正比。个体从所有地点（包括他们
自己的地点）寻找就业机会，并选择提供更好前景的最近地点。在这里，“更好”指
的是吸引力或福利超过个体当前地点最佳机会的就业机会。
当我们获得F (i,j) 时，我们可以进一步估计联合概率，可以表示为：
HW
F (i,j)
P HW
P (i,j) = (9)
HW
F (i,j)
i,j HW
同样，P (i,k)和P (j,k)也可以通过相同的结构来估计。此外，我们可以继
HO WO
15
续估计家庭、工作和其他地点的联合概率分布：
F (i,k)+F (j,k)
P HO PWO
P (i,j,k) = (10)
HWO
F (i,k)+ F (j,k)
i,k HO j,k WO
这个方程代表了在给定人口分布和就业机会的情况下，家庭位置 i、工作位置 j
和其他位置k 同时发生的概率。
通过这种方法，我们可以估计新区域中关键地点的联合分布，然后根据这个分布
抽样，为每个生成的个体生成关键地点的组合。
3.2.4 生活模式的提取与表示
生活模式可以通过多种方法概念化，例如矩阵表示法，其中量化了从一个地点到
另一个地点的转换概率；时间网络，它强调移动的时间和顺序；或者甚至更抽象的模
型，通过统计或机器学习技术捕捉移动模式的本质。这些方法中的每一种都提供了对
生活模式结构和动态的独特见解，突出了个体如何导航其环境的不同方面。
为了处理大量的数据集，本文采用基于概率的方法。它涉及分析每个用户在不同
时间间隔内的位置数据，以计算不同地点之间的转换概率，从而表征每个用户的日常
生活模式。
具体来说，用户的一天被分为多个时间间隔，每个间隔的持续时间为 ∆t，例如
小时或半小时。通过检查这些间隔内用户的地点信息，并计算不同地点之间的转换概
率，可以得出以下表达式：
N
P (i,j,d,t,u)
p = (11)
(i,j,d,t,u)
N
i,j (i,j,d,t,u)
其中，N 表示用户 u 在类型为 d 的一天的时间窗口 t 内，从地点类型 i 转移到
(ij,dt,u)
地点类型j 的次数。
因此，个体u 的生活模式可以用一个向量来表示：
LP = [p ] (12)
u (i,j,d,t,u)
在为每个用户获取向量 LP 后，我们可以将所有用户向量组合起来，创建一个
u
16
生活模式矩阵LP，它展示了所有用户的生活模式。如果有n个用户，每个用户的日
常生活模式向量包含 m 个转换概率，那么 LP 矩阵的大小将是 n×m，其中每一行
代表一个用户的日常生活模式向量。数学表示可以描述为：
2 3
LP
1
6 7
6LP 7
2
LP = 6 . 7 (13)
4 . 5
.
LP
n n×m
通过LP 矩阵，本论文记录了城市中所有个体的长期活动模式信息。
3.2.5 基于矩阵分解的生活模式生成
当我们需要生成个体时，我们只需要根据LP 矩阵的模式生成个体的生活模式向
量。然而，在实际应用中，这个矩阵通常非常稀疏。我们可以使用矩阵降维方法，如
奇异值分解（SVD）、非负矩阵分解（NMF）等，来提取模式，并基于这些模式生成
个体。例如，这里我们使用SVD方法进行分解。对LP 矩阵进行SVD分解可以表示
为：
X
LP = UΣVT = δ u vT (14)
i i i
i
矩阵 LP 可以分解为三个主要组成部分：两个正交矩阵 U 和 V，以及一个对角
矩阵Σ。矩阵Σ对角线上的元素是奇异值δ ，按照降序排列。这些奇异值反映了数据
i
中不同模式的重要性或“强度”。矩阵U 的列向量u 和矩阵V 的行向量vT 分别代表
i i
原始数据空间和特征空间中的“模式”。
在这个分解中，每个项 δ u vT 代表 LP 矩阵中的一个主要模式，其中 u 是该模
i i i i
式在用户生活方式空间中的方向向量，而 vT 是该模式在时间-地点空间中的方向向
i
量。奇异值 δ 表示该模式的重要性或贡献。通过选择最大的几个奇异值及其对应的
i
u 和 vT，我们可以近似重构 LP 矩阵，捕捉数据中最主要的模式，同时消除噪声和
i i
不重要的细节。
vT 代表原始数据中个体生活方式模式的基础。这些基础可以看作是构成所有个
i
体生活方式模式的“组成部分”。在生成新个体时，可以考虑保持V 矩阵和Σ矩阵不
17
变，并利用现有的生活方式模式基础（即VT 中的向量）来构建或生成新个体的生活
方式模式。
这种方法的关键在于，通过调整 U 矩阵中的值，我们可以生成具有特定生活方
式模式特征的新个体。通过改变 U 中的值，我们可以调整新个体生活方式模式的组
成，并生成具有不同特征的生活方式模式。具体来说，在生成新个体时，可以创建一
个新的 U 矩阵作为 U˜。U˜ 矩阵可以通过随机生成或特定规则来确定，其中每一行代
表新个体与VT 中每个基础向量关联的强度。
这里本论文假设 U 矩阵的每一列都遵循正态分布。通过提取每列正态分布的参
数（即均值和标准差），我们可以使用这些参数来生成一个新的矩阵 U˜，然后创建新
的个体生活方式模式向量。以下是具体的步骤和公式：
1. 提取矩阵U 列的分布参数：对于矩阵U 中的每一列c，计算该列的均值µ 和
c
标准差σ 。这可以通过以下公式完成：
c
Xn
1
µ = u (15)
c ic
n
i=1
v
u
u Xn
t 1
σ = (u −µ )2 (16)
c n−1 ic c
i=1
其中，u 表示矩阵U 中第i行第c列的元素，n是矩阵U 的行数（即用户数量）。
ic
Xn
1
µ = u (17)
c ic
n
i=1
v
u
u Xn
t 1
σ = (u −µ )2 (18)
c n−1 ic c
i=1
在这里，u 表示矩阵 U 中第 i 行第 c 列的元素，n 是矩阵 U 的行数（即用户数
ic
量）。
2. 生成新的矩阵 U˜：使用步骤 1 中计算的每列的均值和标准差，在新矩阵 U˜ 的
每一列中，我们可以从正态分布中随机生成新的元素。具体来说，对于 U˜ 中的每个
元素u˜ ，可以使用以下公式生成：
ic
18
u˜ ∼ N(µ ,σ2) (19)
ic c c
在这里，N(µ ,σ2) 表示均值为µ ，方差为σ2 的正态分布。
c c c c
通过遵循上述步骤，我们可以生成一个包含基于矩阵 U 原始列分布生成的新元
素的新矩阵U˜。这种方法允许我们生成具有类似分布特征的新个体，同时保持原始生
活方式模式分布。生成的新矩阵U˜ 可以与原始矩阵V 和Σ结合，使用以下公式生成
新的个体生活方式模式：
L˜ P = U˜ ΣVT (20)
3.2.6 从关键地点和生活方式模式生成长期个体移动性
算法1生成长期移动性轨迹
1: Input: K u: user key location set, M u: Markov transition matrix of user, StartDate:
Startdate,D: Numberofdays
2: Output: Traj u: Long-termmobilitytrajectoriesset
3: Initialize user location Loc with location type selected from M u and position selected
fromK .
u
4: forEachday d inrange(D)do
5: Determine ifd isaworkdayanduser isa commuter.
6: if Itisacommutedaythen
7: Selectworkplace fromW u.
8: Determine workstartandendtimesbasedonGMM.
9: Determine ifabreakisneededwithinworkhoursbasedonGMM.
10: Constructworkdaytrajectorywithpossible breaks.
11: AppendsegmentoftrajectoriesintoTraj u.
12: else
13: while Currenttimet c < endof d do
14: selectednextlocationLoc next basedon M u.
15: Inferstaydurationδt fromGMM.
16: AppendsegmentoftrajectoryfromLoc toLoc next intoTraj u.
17: Loc ← Loc next
18: t c ← t c +δt
19: endwhile
20: endif
21: endfor
22: Output Traj u
19
从生活模式向量重构个体的轨迹涉及两个关键元素：1. 停留点之间的转移概率；
2. 每个停留点的停留时间。在这个模型中，使用基于马尔可夫链的模型来模拟从一
个停留点到另一个停留点的转移概率，而停留时间的长短则由基于个体数据统计的
高斯混合概率分布（GMM）来确定。
在这里，移动性生成模型使用马尔可夫链模型来生成生活模式序列，从而模拟用
户的日常生活模式。马尔可夫链模型假设系统的下一个状态仅取决于当前状态，而与
之前的状态无关[28]。这个假设简化了复杂系统的建模过程，使得模型更容易理解和
实现。在相关研究中，马尔可夫链模型被广泛用于模拟和预测个体的旅行行为[29-30]。
之前提取的个体生活模式向量 LP 实际上记录了用户在不同时间段从一个地点
u
转移到另一个地点的概率，这对应于马尔可夫链模型中的转移概率矩阵。
对于用户u，他的家庭位置表示为H = {H ,H ,H ,...,H }，工作位
u (1,u) (2,u) (3,u) (j1,u)
置表示为W = {W ,W ,W ,...,W }，其他位置表示为O = {O ,...,O }，
u (1,u) (2,u) (3,u) (j2,u) u (1,u) (j1,u)
这些都代表了用户u 的所有关键位置。
用户状态表示为s ∈ K = H ∪W ∪O ，长度为m，个体u在第d天第t时刻
i u u u u
的状态转移矩阵为：
2 3
p p ··· p
6
(s1,s1) (s1,s2) (s1,sm)
7
6p p ··· p 7
M u = 6 4
(s2
. .
.,s1) (s2
. .
.,s2)
...
(s2
. .
.,sm)
7 5 (21)
p p ··· p
(sm,s1) (sm,s2) (sm,sm)
wherethe transitionprobabilityiscalculatedbyvectorLP :
u
p(i,j,d,t,u)
P
p = (22)
(i,j,u)
p(i,j,d,t,u)
i,j
接下来，设计了一个算法，根据生活模式序列和关键地点来构建个体的长期移动
性轨迹。
在算法中，我们为每个个体在通勤日和非通勤日应用不同的转移矩阵M 。对于
u
每个个体，算法首先初始化初始状态。然后，基于状态转移概率矩阵M ，模型将确
u
定用户的下一个状态。接下来，模型将根据状态的类型（从用户数据中获得的概率分
布中采样）生成状态的持续时间，并将其添加到活动模式序列中。这个过程会持续进
20
行，直到生成的轨迹长度达到指定的时间段。算法的整体流程如算法1所示。
4. 结果与分析
4.1 数据和研究区域
在本研究中，使用了来自上海和北京的匿名手机轨迹数据进行测试。本研究使用
的移动信号数据来源于移动运营商，最初是为了计费和运营目的而收集的。上海数据
集包含了超过2700万用户的信息，每天大约有8000万条记录，覆盖了2023年11月
13日至19日的时间段。北京数据集包含了2023年11月的数据，数据质量与上海数
据集相似。每条数据记录包括多种信息，例如加密的用户 ID 号码、信号事件的时间
戳以及连接的基站的ID 代码。
4.2 结果以及分析
4.2.1 从个体到城市规模动态的移动性生成
在这个实验中，本论文提出的模型被应用于生成 30,000 个虚拟用户在上海 7 天
内的移动模式，关键位置和生活模式信息是从真实轨迹数据中识别和提取的结果中
采样得到的。生成的移动性数据集的具体格式在表1中展示，详细列出了每个数据条
目对应用户访问特定位置的具体细节。
图5提供了生成轨迹结果的全面可视化，为理解城市环境中的个体和集体移动模
式提供了洞见。
图5(a)展示了10,000个用户子集的GPS位置分布，提供了空间活动的快照，并
突出了通常对应于住宅区、商业区或工业区的高密度区域。这种空间分布对于理解
活动的地理分布以及个体与城市环境的互动至关重要。图5(b) 专注于同一 7 天期间
100个用户的出行OD模式，展示了个体之间旅行行为的多样性。这一分析部分揭示
了城市移动性的复杂性，每个个体的移动编织出日常生活和与城市互动的独特故事。
表1 生成移动性的示例
ID 时间 经度 纬度 地点类型
1 2023-07-1200:06:00 121.628705 31.325641 家庭
1 2023-07-1210:24:00 121.651326 31.322228 工作
1 2023-07-1222:36:19 121.628705 31.325641 家庭
1 2023-07-1308:56:29 121.651326 31.322228 工作
1 2023-07-1323:52:02 121.628705 31.325641 家庭
21
图5 生成的移动性结果
图5(c)选择了4个居民的7天OD分布并详细展示了它们，展示了居民生活模式的多
样性。OD映射形成了多边形形状，代表了每个个体的活动空间，包括住宅、工作地
点以及其他常去的地方。这种多边形表示是生活模式概念的图形体现，突出了个体在
城市织锦中的移动规律性和可预测性。
从微观视角来看，生成的结果包含了不同的生活模式，个体按照他们的个人习惯
和偏好在家庭、工作地点和其他目的地之间定期移动。这些生活模式通过OD多边形
表现出来，勾勒出每个个体的活动空间，为他们与城市日常互动提供了视觉表现。在
宏观尺度上，所有生成轨迹的聚合数据与上海实际观察到的城市活动模式紧密对齐。
数据展示了城市中心的活动集中，以及向郊区的分散，反映了城市扩张和集中化的现
实动态。生成的移动性模式与现实观察的一致性验证了本论文模型的有效性，它能够
捕捉从个体日常移动到集体行为更广泛模式的城市移动性本质。
为了评估本论文框架生成的合成移动性轨迹的准确性和现实性，本论文进行了
详细的比较，将生成的移动性数据与实际移动性数据进行了对比。这涉及到将生成的
移动性数据聚合到1kmx1km的网格单元中，然后比较这些单元内的人口密度。
然而，必须认识到实际移动性数据中存在自然波动。例如，如果从特定网格单元
中对 30,000 个个体及其活动进行采样，由于人类移动模式的内在变异性，如果采样
的是另一组 30,000 个不同的个体，那么得到的数字将不会完全相同。认识到这一点，
生成的数据与这些自然波动的对齐程度越高，就越能准确地说它反映了现实世界的
情况。
为了在相同的条件下进行公平的比较，本论文虚拟地采样了 30,000 个用户（生
22
图6 生成的空间时间轨迹示例
成组），并从实际移动性数据中进行了两次随机采样，每次采样30,000个用户（真实
地面真相组A和真实地面真相组B）。通过将这些样本聚合到网格单元中，我们可以
直接比较结果。
图7(a) 中的散点图展示了生成组与真实地面真相组 A 之间 24 小时网格热图的比
较，每个点代表特定时间网格的人口计数。整体高相关性（R2 =0.8922）表明生成数
据与真实数据之间有很强的相似性。同样，图7(b) 比较了真实地面真相组 A 与真实
地面真相组 B，显示了 r2 值为 0.8864。点的分布表明，本论文模型生成的网格热图
紧密地反映了实际人口分布，展示了我们方法在复制城市网格中现实世界人口分布
方面的有效性。
4.2.2 个体生活模式的迁移能力
为了测试本研究中提出的个体生活模式的迁移能力，进行了几项实验。
为了检验同一城市不同区域之间生活模式的可迁移性，本论文把上海分为两个
区域：浦东和浦西，并进行了实验。
本论文测试了以下几种场景：将浦西的生活模式与浦东的关键地点结合起来生
成虚拟轨迹，以及将浦西的生活模式与上海全市的关键地点结合起来生成虚拟轨迹。
23
图7 在网格人口水平上对生成的移动性进行比较
24
图8 生成的移动性性能（与真实地面真相组A的人口密度比较）
同样，本论文测试了将浦东的生活模式与上海全市的关键地点结合起来生成虚拟轨
迹的情况，最后，本论文使用了上海全市的生活模式与全市关键地点结合的场景。
此外，本论文还进行了跨城市生活模式迁移能力的实验。本论文从北京的一个数
据集中提取了100,000个个体的生活模式信息，并将这些信息与上海的关键地点结合
起来生成了 30,000 条虚拟轨迹。然后，本论文将这些虚拟轨迹与实际的 30,000 条轨
迹进行比较，以评估性能。
图8 (a) 和 (b) 分别代表了使用“R²”和“均方根误差 (RMSE)”指标测试不同场
景下个体生活模式迁移能力的实验结果。
所有场景的R2值都相对较高，超过0.80，表明模型在不同设置下的性能良好。场
景之间的一致性表明，模型有效地捕捉了生活模式的本质特征，无论是城市内部（上
海）还是城市之间（北京到上海）的迁移。场景“Puxi(LP) - Pudong(KL)”的 RMSE
值也是最低的，这进一步证实了R2 值表明该场景非常准确。所有场景的RMSE值相
对较低，最高的值约为 0.04，这仍然相当低，表明预测误差很小。“真实地面真相组
B”作为基准或对照组，展示了模型相对于实际数据的性能如何。
这些实验表明，从城市的一部分（例如，浦西）提取的生活模式可以有效地转移
到预测另一部分城市（例如，浦东）的行为，甚至跨城市（例如，从北京到上海）。模
型在使用生活模式和关键地点生成虚拟轨迹方面表现出稳健性和可靠性，这些虚拟
轨迹紧密地反映了数据中观察到的实际模式。这表明这些模型在城市规划、交通管理
等应用中具有强大的潜力，这些应用中理解和预测人类移动性模式至关重要。
25
图9 生成移动性与实际人口密度的代表性性能比较
4.2.3 生成移动性的代表性表现
生成精确的个体移动性是一个耗时且需要计算能力的过程。因此，在保持其描
述城市移动模式能力的同时，减少生成个体的数量是必要的。为此，进行了一系列实
验，以调查生成的个体轨迹在代表整体城市移动模式方面的充分性。
实验包括从 0 到 100,000 的合成个体轨迹范围，每隔 1,000 个个体采样一次。然
后将生成的个体移动性在空间分辨率为 1 公里 x1 公里的网格尺度上进行聚合，并以
每小时和每天的时间分辨率进行比较。这些聚合结果随后与代表 808 万用户的实际
移动电话信号数据的聚合人口密度进行比较。为了确保统计数据的一致性和可比性，
两组数据都被归一化到 0-1 的范围内，消除了不同数据集之间可能存在的量级差异，
并确保了数据分析的准确性。
图9展示了合成个体数量与其代表性能之间的关系，由两个统计指标R2（图9(a)）
和RMSE（图9(b)）与实际人口密度进行比较。两幅图都显示，随着合成个体数量的
增加，每日和每小时聚合的结果趋于稳定，其中日性能通常优于小时性能。当生成的
虚拟个体结果达到约 10,000 时，生成的移动性可以以日粒度描述城市级别的群体动
态，R2 超过0.8，而每小时粒度则需要超过20,000个个体。实际上，这一结果也证明
了仅使用大约 0.25% 的采样个体（即从 808 万中选取的 20,000 个个体）就足以代表
整个城市人口的动态变化，这进一步证明了本研究中轨迹生成技术的价值。
26
5. 总结
本研究成功开发并实施了一个创新的基于地理信息系统（GIS）的框架，旨在生
成城市规模的个体级时空移动性模式。通过将关键地点的概念与动态生活模式相结
合，我们提出了一种全面的方法来模拟和预测城市环境中个体的复杂移动行为。本研
究的主要贡献和发现包括：
• 利用上海长期轨迹数据，我们提取了个体的生活模式和关键地点信息。所提出
的方法不仅在理论上有其创新性，而且在实践应用中也显示出其有效性，成功
地应用于生成上海30,000个虚拟用户在7天内的移动性模式。
• 通过将不同区域的关键地点与生活模式相结合，模型展现了在城市内部不同区
域之间以及跨城市迁移的强大能力。这一发现不仅证明了模型的灵活性和适应
性，也为城市规划和交通管理提供了新的视角。
• 通过评估生成的移动性数据的代表性，我们发现仅使用生成的个体移动性的约
0.25% 就足以在日常和每小时的时间分辨率下捕捉整个城市人口的动态变化。
这一发现对于理解城市动态和优化资源分配具有重要意义。
本研究不仅为城市管理者、规划师和政策制定者提供了一种新的工具，以应对城
市化进程中日益增长的交通挑战，而且为未来城市移动性研究提供了宝贵的理论和
实践基础。通过本研究，我们展示了如何利用先进的数据分析和模拟技术来更好地理
解个体移动性，并为城市规划和交通管理提供科学依据。
27
参考文献
[1] FORGHANI M, KARIMIPOUR F, CLARAMUNT C. From cellular positioning data to trajec-
tories: Steps towards a more accurate mobility exploration[J]. Transportation Research Part C:
EmergingTechnologies,2020,117:102666.
[2] FEKIHM,BELLEMANST,SMOREDAZ,etal.Adata-drivenapproachfororigin–destination
matrixconstructionfromcellularnetworksignallingdata:acasestudyofLyonregion(France)[J].
Transportation,2021,48:1671-1702.
[3] GHAHRAMANI M, ZHOU M, WANG G. Urban sensing based on mobile phone data: Ap-
proaches, applications, and challenges[J]. IEEE/CAA Journal of Automatica Sinica, 2020, 7(3):
627-637.
[4] YANG M, LUO W, ASHOORI M, et al. Big-data driven framework to estimate vehicle volume
basedonmobiledevicelocationdata[J].Transportationresearchrecord,2024,2678(2):352-365.
[5] LIU Y, FANG F, JING Y. How urban land use influences commuting flows in Wuhan, Central
China: A mobile phone signaling data perspective[J]. Sustainable Cities and Society, 2020, 53:
101914.
[6] HARRISONG,GRANT-MULLERSM,HODGSONFC.Newandemergingdataformsintrans-
portationplanningandpolicy:Opportunitiesandchallengesfor“TrackandTrace”data[J].Trans-
portationResearchPartC:EmergingTechnologies,2020,117:102672.
[7] ISMAGILOVAE,HUGHESL,RANANP,etal.Security,privacyandriskswithinsmartcities:
Literaturereviewanddevelopmentofasmartcityinteractionframework[J].InformationSystems
Frontiers,2022:1-22.
[8] SAVAGEN.Syntheticdatacouldbebetterthanrealdata.[J].Nature,2023.
[9] LIDBEA,ADANUEK,PENMETSAP,etal.ChangesinthetravelpatternsofolderAmericans
withmedicalconditions:Acomparisonof2001and2017NHTSdata[J].Transportationresearch
interdisciplinaryperspectives,2021,11:100463.
[10] WANGS,MEIG,CUOMOS.Agenericparadigmformininghumanmobilitypatternsbasedon
theGPStrajectorydatausingcomplexnetworkanalysis[J].Concurrencyandcomputation,2021,
33(4):n/a.
[11] JIANGB,YINJ,ZHAOS.Characterizingthehumanmobilitypatterninalargestreetnetwork[J].
Physicalreview.E,Statistical,nonlinear,andsoftmatterphysics,2009,80(2Pt1):021136-021136.
[12] GONZÁLEZMC,HIDALGOCA,BARABÁSIAL.Understandingindividualhumanmobility
patterns[J].Nature(London),2009,458(7235):238-238.
[13] KUNG K S, GRECO K, SOBOLEVSKY S, et al. Exploring universal patterns in human home-
workcommutingfrommobilephonedata[J].PloSone,2014,9(6):e96180-e96180.
[14] ARCOLEZIHH,COUCHOTJF,RENAUDD,etal.Differentiallyprivatemultivariatetimeseries
forecasting of aggregated human mobility with deep learning: Input or gradient perturbation?[J].
Neuralcomputing&applications,2022,34(16):13355-13369.
28
[15] WANG Y, CURRIM F, RAM S. Deep Learning of Spatiotemporal Patterns for Urban Mobility
PredictionUsingBigData[J].Informationsystemsresearch,2022,33(2):579-598.
[16] YANGD,FANKHAUSERB,ROSSOP,etal.Locationpredictionoversparseusermobilitytraces
usingrnns[C].in:Proceedingsofthetwenty-ninthinternationaljointconferenceonartificialintel-
ligence.2020:2184-2190.
[17] DENGB,YANGD,QUB,etal.RobustLocationPredictionoverSparseSpatiotemporalTrajectory
Data:FlashbacktotheRightMoment[J].ACMtransactionsonintelligentsystemsandtechnology,
2023,14(5):1-24.
[18] ABIDEEN Z U, SUN H, YANG Z, et al. Deep Wide Spatial-Temporal Based Transformer Net-
works Modeling for the Next Destination According to the Taxi Driver Behavior Prediction[J].
Appliedsciences,2021,11(1):17.
[19] CHEN Y, LONG C, CONG G, et al. Context-aware Deep Model for Joint Mobility and Time
Prediction[C].in:WSDM’20:TheThirteenthACMInternationalConferenceonWebSearchand
DataMining.2020.
[20] SONG C, KOREN T, WANG P, et al. Modelling the scaling properties of human mobility[J].
NaturePhysics,2010,6(10).
[21] CAOC,LIM.GeneratingMobilityTrajectorieswithRetainedDataUtility[C].in:KDD’21:The
27thACMSIGKDDConferenceonKnowledgeDiscoveryandDataMining.2021.
[22] LONGQ,WANGH,LIT,etal.PracticalSyntheticHumanTrajectoriesGenerationBasedonVari-
ationalPointProcesses[C/OL].in:KDD’23:Proceedingsofthe29thACMSIGKDDConference
onKnowledgeDiscoveryandDataMining.,LongBeach,CA,USA,AssociationforComputing
Machinery,2023:4561-4571.https://doi.org/10.1145/3580305.3599888.DOI:10.1145/3580305
.3599888.
[23] ZHUY,YEY,ZHAOX,etal.DiffusionmodelforGPStrajectorygeneration[J].arXivpreprint
arXiv:2304.11582,2023.
[24] GOLLEDGE R G. Learning about urban environment[J]. Timing space and spacing time Vol. 1:
Makingsenseoftime,1978:76-98.
[25] LIW,CHENGX,DUANZ,etal.Aframeworkforspatialinteractionanalysisbasedonlarge-scale
mobilephonedata[J].Computationalintelligenceandneuroscience,2014,2014:21-21.
[26] YU Q, LI W, YANG D, et al. Mobile phone data in urban commuting: A network community
detection-basedframeworktounveilthespatialstructureofcommutingdemand[J].JournalofAd-
vancedTransportation,2020,2020:1-15.
[27] YU Q, YUAN J. TransBigData: A Python package for transportation spatio-temporal big data
processing,analysisandvisualization[J/OL].JournalofOpenSourceSoftware,2022,7(71):4021.
https://doi.org/10.21105/joss.04021.DOI:10.21105/joss.04021.
[28] NORRISJR.Markovchains[M].Cambridgeuniversitypress,1998.
[29] HUANGW,LIS,LIUX,etal.Predictinghumanmobilitywithactivitychanges[J].International
JournalofGeographicalInformationScience,2015,29(9):1569-1587.
29
[30] JIANG J, PAN C, LIU H, et al. Predicting human mobility based on location data modeled by
Markov chains[C]. in: 2016 Fourth International Conference on Ubiquitous Positioning, Indoor
NavigationandLocationBasedServices(UPINLBS).2016:145-151.
30
致谢
在本论文即将完成之际，我衷心感谢所有在我求学和研究过程中给予我支持和
帮助的人。
首先，我要深深地感谢我的父母。在我成长和求学的道路上，他们始终是我最坚
强的后盾。他们的无私奉献和无条件支持是我能够坚持并顺利完成学业的基石。他们
的爱和鼓励是我不断前进的动力。
其次，我要感谢我的导师宋轩老师、张浩然老师和余庆老师。在他们的悉心指导
下，我不仅学到了专业知识，更重要的是学会了如何做研究和解决问题。他们的严谨
学术态度和对科研的热情深深影响了我，使我受益匪浅。在论文的撰写过程中，他们
给予了我宝贵的建议和无私的帮助，我对此表示最诚挚的感谢。
此外，我要感谢我的女朋友。在过去的三年里，她不仅在生活上给予我无微不至
的关怀，还在精神上给予我极大的支持。她的理解和陪伴是我宝贵的财富。特别感谢
她请我吃海底捞，这不仅是一顿美食，更是我们共同美好回忆的一部分。
最后，我要感谢所有在本研究过程中提供帮助和支持的朋友们。你们的鼓励和帮
助是我完成论文不可或缺的力量。
在此，我对所有给予我帮助和支持的人表示最深的感激之情。没有你们的帮助，
我无法完成这篇论文。我将这份成果献给你们，希望它能够作为我们共同努力的见
证。
31