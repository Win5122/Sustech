动言什技灾区

3OUTHERN UNIVER3ITY OF SCIENCE AND TECHNOLOGY

本科生毕业设计  《论文)

题 目:                    基于梯度提升回归树的
纯电动汽车剩余续驶里程预测
姓 名:                                        陈文辟
学 号:                           11910434
系 “”别:         计算机科学与工程系
专 “”业:                    计算机科学与技术
指导教师:                          宋轩 副教授

2023 年6月2日

诚信承诺书

1. 本人郑重承诺所呈交的毕业设计《论文)，是在导师的指导
独立进行研究工作所取得的成果，所有数据、图片资料均真实可靠。

2. 除文中已经注明引用的内容外，本论文不包合任何其他人或
集体已经发表或撰写过的作品或成果。对本论文的研究作出重要页
献的个人和集体，均已在文中以明确的方式标明。

3.本人承诡在毕业论文《设计) 选题和研究内容过程中没有抄袭
他人研究成果和伪造相关数据等行为。

4. 在毕业论文《设计) 中对侵犯任何方面知识产权的行为,由本
人承担相应的法律责任。

作者签名: 阶、文
2223 年人月2 日

基于桥度提升回归树的
纯电动汽车剩余续驶里程预测

陈文履
《计算机科学与工程系 “指导教师: 宋轩)

[摘要] : 面对日益严峻的能源问题和环境污染问题，契合绿色、低碳、可
持续发展观念的电动汽车进入了产业的高速发展期。但在当今电池能量
密度尚未取得较大提升、充电基础设施建设不够完善的情况下,， “里程
焦虑”现象渐现端倪，严重影响了电动汽车的用户体验与接受度。因此，
基于真实历史运行数据进行剩余续驶里程的建横预测对电动汽车的推广、
普及、发展都具有重要意义。本文的主要研究内容如下:

41) 纯电动汽车运行数据的筛选与预处理。从原始数据集中筛选出
纯电动汽车的运行数据，并进行预处理，构建剩余续驶里程字段。

(2) 影响纯电动汽车剩余续驶里程的关键特征参数分析。从纯电动
汽车的运行数据出发，运用斯度尔曼相关系数等方法分析了剩余续驶里
程与各特征参数以及各特征参数之间的相关关系，初步筛选出与纯电动
汽车的剩余续驱里程相关性较强的关键特征参数。

(3) 基于梯度提升回归树 〈GBRT) 与递归特征消除算法 (RFE) 的
剩余续驶里程建模预测。使用递归特征消除算法得到表征剩余续驶里程
的关键特征参数，减少特征之间共线性对模型的影响，基于梯度提升回
归树对纯电动汽车的剩余续驶里程进行建模预测，并分析、评估模型的
预测结果。

[关键词]: 机器学习; 剩余续驶里程，纯电动汽车，GBRT; REFE

[ABSTRACT|]1: The issues of enersgy and environmental pollution are be-
coming Increasingjly severe in today's world. Electric vehicles that adheretothe
green, low-carbon, and Sustainable development concepts have entered aperiod
of raplid development in the Industry. However the energy density of electric
vehicle batteries has not yet achieved slgnificant Improvement and the construc-
tion ofcharging Infrastructure ls not sufficiently complete. Underthese circum-
stances, the phenomenon of ”Tange anxlety”has gradually emerged, which seri-
ously affects the user experlence and acceptance ofelectric vehlicles. Therefore，
modeling and predicting the remaining driving range based on real historical
operational data ls of great Slgnlificance for the promotion, popularization, and
development of electric vehicles. The main research contents of this paper are
as follows:

(]) Screening and preprocessing of running data of pure electric vehicles.

(2) Analysls of key characterlstic Parameters affecting the remaining driv-
ing range ofpure electric vehicles.

(3) Modeling and predictton of remaining driving distance based on gradi-
ent lifting regresslon tree (GBRT) and recurslive feature elimination algorithm

(REFE).

[和Key words|: machine learning; remaining driving range; battery electric

vehilicles; GEBRT; RFE

1. 引言 1
1.1 研究背景及意义.| 1
1.2 国内外研究现状 1
1.3 剩余续驶里程定义 . 2
1.4 本文内容与结构安排 . .3 2
2. 数据预处理 . 3
2.1 原始数据集. 3
2.2 数据预处理. .4 4
2.2.1 数据筛选 . 5
2.2.2 数据异常值处理 . 6
2.2.3 数据缺失值处理 .4 6
2.2.4 数据切片 6
2.2.5 剩余续驶里程字段构造. 7
3. 剩余续驶里程的关键特征参数 . . .4 8
3.1 剩余续驶里程的相关影响因素分析 . 8
3.2 特征间相关性分析 11
3.2.1 斯皮尔曼等级相关系数的基本原理 . .12
3.2.2 变量间相关性分析 . 12
4. 基于梯度提升与递归特征消除算法的剩余续驶里程预测 . . . . . 14

4.1 梯度提升回归树〈GBRT) 的基本思想.. .14

J

4.2 基于递归特征消除的特征筛选 . 15
4.2.1 递归特征消除的基本思想 . .815
4.2.2 特征参数筛选 . .8 16
4.3 训练集与测试集. .816
4.4 模型参数 . .0 17
4.5 预测结果及模型评估 . .9 18
4.$.1 模型评估指标 . 18
4.5.2 模型预测结果评估 . 18
S. 总结与展望 . .| 19
参考文献 . .   21
致谢 . .| 23

TIV

|

1 引言

1.1 研究背景及意义

当今，  我国

正面临着日益喘

大，且能源结构较不合理

题也不容轻视，大气污染、

上峻的能源和环境问题。一方面,我

国的能源消耗量巨

过度依赖煤炭等化石能源;，另一方面，我国的环境污染问

染、鞋培污染等问题频发由，这些问题不仅会影响人

民的健康，也会威胁到社会的可持续发展。因此，契合绿色、低碳、可持续发展观念

的电动汽车成为了未来发展的大势所趋。

电动汽车具有节能低碳的优点，以电池储能代替传统人燃油，既可以减少二氧化兢
等温室气体的排放，又可以降低对化石能源的依赖3 ，对缓解环境污染、保障国家

ZI

E源安全都起到了积极作用。但是, 我国在电动汽车发
决，如电池能量密度较低导致的续航呈

出行等向，这些问题使得电动汽车的月
车的用户体验和推广善及。

因此，纯电动汽车剩余续驶里程的精准预测将对缓解“号
验、进一步普及和拭        重天意义P]，拥有很高的研究价值。
1.2 ”国内外研究现状

峻的环境问题，以及多国政府的大力发展, 纯

因为全球日益

广纯电动汽车其有

里程的精准预测问题一直受到国
上了一种有效消除数据分布不平衡的策略，并基于真实历史驾驶
数据，融合了 XGBoost 和 LightGBM 两种先进的机器学习算法对
驶里程进行了预测。昌

Zhao 等人外提章

情过程中仍有许多问题需要解

程不足，充电基础设施建设不够完善影响用户

日户容易产生“里程焦虑”，直接影响了电动汽

程焦碟” 提高用户体

昌晟 等人中运用改进

成了与

六-一

忒标签字段拥有

优，使得剩余续驶里和

昌动汽车剩余续驶

动汽车的剩余续

回归算法扩充了数据的纬度，自动生
的新特征字段，并对 XGBoost 模型进行超参数调
的预测结果中，最大相对绝对误差下降了 4.9%，和平均绝对误

差和均方根误差下降超过 20%。Lamantia 等人四提出了一种新的电动汽车剩余续驶里

程的估计方法，该方法将气动阻力系数的实时估计和先进区驶轴

和助系统 (ADAS) 或队

列行驶的模式集成到电动汽车的物理模型中，提高了高速公路上电动汽车剩余续驶
里程的估计精度。Ayevide 等人四提出了一种融合NARX 和卡尔曼滤波 CKF) 的递归


动态网络, 利用来自天气、车辆速度和道路状况的信息来预测电池输出功率和剩余续
驶里程，并在不同环境条件下进行了驾驶实验，与传统的基于模型的预测方法相比，
预测的准确度有了明显的提升。

1.3 剩余续驶里程定义

对于纯电动汽车, 续台里程 (Dring Range) 指全电续驶里程 (All Electric Range )，
即纯电动汽车满电状态下《〈荷电状态 SOC 对应 100%) , 仅依靠电池能量行驶至电池
能量耗斥时〈荷电状态 SOC 对应 0%)，车辆能够行驶的距离[9 。

行驶里程是指车辆从满电状态开始, 按照一定的工况行驶至当前时刻时，车辆所
行驶的距离0 。

剩余续驶里程 (Remaining Driving Range) 是指从当前时刻开始，直至 SOC 降至
设定的截止 SOC 时，车辆累计行驶的距离503]。剩余续驶里程在纯电动汽车的行驶过
程中需要进行实时预测，当车辆无法再行驶时，剩余续驶里程为 003]。

1.4 本文内容与结构安排

本文的主要研究内容为纯电动汽车的剩余续驶里程预测。选用纯电动汽车的真
实历史运行数据,结合对剩余续驶里程的相关影响因素分析,， 基于有监督机器学习进
行建模预测。本文分为五个章节，每一章节的具体内容如下:

第一章: 引言。本章主要介绍了纯电动汽车剩余续驶里程预测问题的研究背景
意义，对剩余续驶里程预测问题的国内外研究现状进行了简单分析, 并解释了纯电动
汽车的剩余续驶里程的定义。

第二章: 数据预处理。本章主要介绍了数据来源、原始数据集情况及数据的预处
理，对数据中的异常值、缺失值进行处理，构造了剩余续驶里程字段，并对数据进行
了切片与压缩。

第三章: 剩余续驶里程的关键特征参数。本章主要介绍了影响纯电动汽车剩余续
驶里程的关键特征参数的初步筛选。从各特征参数与剩余续驶里程之间的关系以及
各特征参数相互之间的关系两个方面着手，利用斯皮尔曼相关系数对剩余续驶里程
的关键特征参数进行分析。

第四章: 基于梯度提升与递归特征消除算法的剩余续驶里程预测。本章在第三章


的基础上，利用递归特征消除算法《REFE) 筛选出了预测剩余续驶里程的关键特征参

数，基于梯度提升回归树〈GBRT) 对剩余续驶里程进行建模预测，并对预测结果进

行了分析评售。

第五章: 总结。本章对论文所做的工作进行了总结，对论文中存在的不足进行了

分析，并给出了今后改进的方向。
2.， 数据预处理
2.1 原始数据集

原始数据采集自上海 2000 辆不同型号、不同动力类型的汽车，其中包含了汽车

的车型数据及其 2020 年 10-12 月期间的车辆运行数据、位置数据、电池极1

人沙。
表1 原始数据集
表和多                       字段名称             字段含义
time                  数据采集时间
vehiclestatus “| 车辆状态
chargestatus “| 充电状态
runmodel             运行模式
Speed                 车速
网的风          summile      累积里程
辆运行数据                                               、
车辆               Sumvolt               总电压
sumcurren           总电流
SOC     谷电状态
DCDC    DC-DC 状态
gearnum              档位
Tesistance             绝缘电阻
、                       longitude                     经度
立置数据
车辆人                        latitude                         纬度
max_single_volt | 电池单体电压最高值
、      本      min single_ volt | 电池单体电压最低值
电池极值数据 上一 |
maxtmp                       最高温度值
mintmp                        最低温度值

数据、驱

动电机数据、次行标签数据以及出险标签数据，数据采集间隔为 10s。基于该原始数
据集进行了纯电动汽车剩余续驶里程预测的相关研究, 具体的参数及其会义如表 1 所

表名                         字段名称             字段含》
Sequence                    驱动电机序号
驱动电机数据 | fotatingspeed        驱动电机转速
torque                   张动电机转矩
tripkind                        次行类型
次行标签数据 | starttime                  开始时采集时间
endtime                       结束时采集时间
出险标签数据 | insurance           是否出险
id       车辆代码
model seq                  车型代码
power seq               车辆动力类型
车型数据         vehicle_ type           车辆类 全
curb_ weight             整备质量
wheel base             轴距
device power            电池额定能量
device_capacity | 电池额定容量

车型数据记录了 2000 辆汽车的基本状态参数，可用于筛选纯电动汽车，其中的
id 字段作为车辆的唯一标识,可在数据加工处理过程中充当索引。车辆运行数据反映
了车辆运行过程中的状态参数,可作为特征参数建模预测汽车的剩余续驶里程。和车辆
位置数据中包含了车辆实时的经度、纬度坐标信息，与本文所研究的汽车剩余续驶里
程相关度较低，为减少计算资源的消耗，对经、纬度字段进行删除。电池极值数据反
映了车辆电池的物理状态, 将其中的数据字段作为关键特征参数进行保留。在驱动电
机数据中，所有字段的内容均与字段描述中的取值范围不符，故对其进行删除，不参
与建模的过程。次行标签数据的内容与第一类车辆运行数据的内容存在重复，故对其
进行过滤。出险标签数据与本文所研究的汽车剩余续驶里程相关度较低，故对其进行
删除，不参与后续数据处理、建模的过程。
2.2 ”数据预处理
根据原始数据集的探查结果,确定与本文所研究的汽车剩余续驶里程相关的、作

为特征变量保密的数据字段有: id、time、vehiclestatus、chargestatus、runmodel、speed、

4

Summile、sSumvolt、sSumecurrent、SOC、DCDC、gearnum、treslstance、Imax_ singlevolt、

min_singlevolt、max_tmp 和 min_tmp 等 17 个字段。基于保留的数据字段进行数据预
处理。

2.2.1 数据筛选

原始数据集中的车辆运行数据记录共计 147727213 条，和车辆动力类型涵盖纯电
动汽车、搬电式混合动力汽车与增程式电动汽车。基于本文研究的是纯电动汽车剩余
续驶里程，故按照车辆动力类型对车型数据记录及车辆运行数据记录进行筛选,共计
得到 330 辆纯电动汽车的车型数据及运行数据。

筛选出纯电动汽车的车型数据后，按照车型代码 model_seq) 统计每种纯电动
汽车车型所包含的车辆数量，330 辆纯电动汽车共分为 96 种车型。不同车型所含车
两总数前 10 排序如图 1 所示。

15

10
ULDUUDUL
0

1 不同车型所含车辆总数前 10 排序

SEE

123114323
1231149106
123114524
123114718
123114934
123115051
123115386

郴 123115228

由图 1 的统计结果表明, 车辆记代码为123114323 的车型包含 24 辆纯电动汽车，
车辆数量排名第一，故本文接下来所采用的数据均为该 24 辆纯电动汽车的车辆运行
数据，共计 2842747 条

为预测汽车的剩余续驶里程，需选取车辆行驶状态下的运行数据记录，故需算选
出 vehiclestatus 对应值为 1〈车辆启动) 的数据。统计全部车辆运行记录中的 charges-
tatus 对应值的分布情况，chargestatus 对应值均为1〈停车充电) 或3 (未充电) 或4
(充电完成)，未出现 chargestatus 为 2《〈行驶充电) 的情况，说明该纯电动汽车车型
不具有能量回收机制，故需得选出 chargestatus 对应值为3 (未充电) 的数据。故按照

3

vehiclestatus = 1 且 chargestatus = 3 的筛选条件对该车型 24 辆纯电动汽车的运行数据

进行初步筛选。

2.2.2 ”数据异常值处理

数据异常值的筛选主要从两个维度进行:
(1) 数据字段描述中规定值的有效范围。
(2) 字段含义的逻辑关系。如 SOC 在单次放电过程中应随时间的增加而降低, 同
一辆车的 summileage 应随时间的增加而增加，同一条数据记录中，max_tmpval 应不

小于 min_ tmpval，max single voltageval 应不小于 min_single_voltageval 等。
在经过异常值得选后，纯电动汽车原生运行数据中原来为异常值的地方会被
None 蔡代，因而出现了数值缺失。

2.2.3 数据缺失值处理

经对筛选得到的纯电动汽车原生运行数据的探查得知，纯电动汽车的原生运行
数据中不存在缺失值，故汽车运行数据中的缺失值均来源于异常值处理步骤。

对于部分特征字段缺失的运行数据行，因相邻两条数据的采样时间间隔为 10s，
选取该条数据前后各 3 条采样数据,，即 1 分钟内的数据，再以该6条采样数据的均值
对缺失值进行填充。

对于整行数据记录的缺失，采取整行数据记录删除的方式进行缺失值的处理。

2.2.4 数据切卢

将进行了异币值和缺失值处理的纯电动汽车运行数据按照车辆 id 划分为 24 个
单独的数据集。对于 24 辆纯电动汽车中每一辆汽车的运行数据均进行切片处理。

当汽车处于局动状态时，处于放电状态,SOC 的值随时间的增加而减少。将纯忠
动汽车的运行数据中相邻的 SOC 了最高值和最低值之间的一系列数据作为一个放电过
程， 按照单个放电过程对纯电动汽车的运行数据进行切片, 将原本连续的数据集切割
成多段的连续放电过程数据片段，并按照车辆 id 分组保存，共计得到 2539 个放电过
程片段。


按照剩余续驶里程的定义，一个理想的放电过程应为 SOC 从 100% 下降到 0%
的过程，但这样的放电过程在 24 辆纯电动汽车的所有放电过程片段中均示出现。在
2539 个放电过程片段中，SOC 从 90% 下降至 10% 的片段不足 10 段，从 80% 下降至
20% 的片段有18 段，故本文将基于 SOC 从 80% 下降到 20% 的放电片段开展纯电动
汽车的剩余续驶里程的建模预测 。

2.2.$ 剩余续驶里程字段构造

由表 2 可知，在纯电动汽车的原始运行数据记录中不存在“剩余续驶里程”数
据字段，故需按照剩余续驶里程的定义构造该字段。在一个放电过程中，累积里程
summile 随着时间不断增加，则 SOC 为 20% 时对应的 summile 值为 summile 的最大
值，剩余续驶里程 remaining mile 等于该最大值减去各条运行数据记录中的 summile
值所得之差。

为减少数据元余、降低数据处理与建模中的计算资源消耗，按照 1 分钟的时间间
隔对数据进行压缩。纯电动车单个放电过程内运行数据压缩后的结果表 2 所示。

表 2 单个放电过程内运行数据

SU  SU   IaX    min  max min    reimain
time  Speed                       SOC
volt current Single volt single volt tmp tmp    Imjle
2020-11-03
70.96 378.12 21.76  3.96   3.92   20.0 19.0 80.0 1439.0
11:33:00
2020-11-03
77.83 ”3760.93 24.65  3.99   3.93   20.0 19.0 80.0 1S7.0
11:34:00
2020-11-03
73.14 374.36 48.68  3.94   3.9    20.0 19.0 79.0 14S6.0
11:3S:00
2020-11-03
64.62 333.32 29.10  3.36   3.30   24.0 22.0 20.0 2.0
16:$7:00
2020-11-03
607.82 334.38 43.48  3.S3   3.48   24.0 22.0 20.0 1.0
16:98:00
2020-11-03
83.30 334.30 32.40  3.S3   3.48   24.0 22.0 20.0 0.0
106:99:00

3.，剩余续驶里程的关键特征参数
3.1 剩余续驶里程的相关影响因素分析

为分析纯电动汽车剩余续驶里程与运行数据中保留的特征变量之间的关系，本
小节中选用车辆id为 2f4598ea458da6034fc947b786846750 的一辆纯电动汽车 2020 年
12月1日11:53 至18:24 的一段预处理后的完整放电过程片段，分别绘制了特征变量

speed、SOC、Sumvolt、Sumcurrent、max_tmp、min tmp、max singlevolt、min singlevolt

与字段 remaining_mile 的散点分布图，得到剩余续驶里程 remaining mile 与各特征变
量之间 的关: 了  分析如下:

《1) speed 与 remaining mile

和

9
[>

remain_mile

0                                    20                                   40                                   60                                    80                                  160
speed

图 2 speed 与 remaining_mile 的相关关系

根据图 2 可知，剩余续驶里程 remaining_mile 随行驶速度 speed 的分布是发散的，
无明显规律可循,因此二者之间不存在线性相关关系。因此，为减少模型训练过程中
的计算资源消耗、提高数据质量，speed 将不会作为关键特征变量进行保留

(2) SOC 与 remaining_mile

160
140|                                                   本
1201                                             1

1001

20               30               40               50               60               70               80
S0C

图3 SOC 与 remaining_mile 的相关关系

图 3 反映了剩余续驶里程 remaining mile 和 SOC 的关系，从图中可以看出，SOC
越大,剩余续驶里程 remaining_mile 也越大，二者呈明显的线性正相关关系。SOC 能
够反映动力电池的剩余可用能量, 故选用 SOC 作为表征剩余续驶里程 remaining _mile
的关键特征变量之一。

《3) sumvolt 与 rfemaining mile

160|

1401
2  1
120|                                             We
8
100                           |
也                             0

80                。

洒 径
601               二

油w

。
41            Le
20|         。。 ea

昌   。   1
中 读
335     340     345     350     355     360     365     370     375

sumvoltage

 4 sumvolt 与 remaining_mile 的相关关系

根据图4 可知，剩余续驶里程 remaining mile 随着总电压 sumvolt 的下降而减少，
总电压和剩余续驶里程总体呈现非线性的正相关关系。故选用总电压 sumvolt 作为表
征剩余续驶里程 remaining mile 的关键特征变量之一。

《4) sumcutrrent 与 rfemaining mile

1601
1
1401
 和
120| ”0                 本
100
王 80    0
60|                     加
40   |     鸣         。
筷          。
20|            站     。
如 。         2
0   格   呈
0       10      20      30      40      50      60      70
Sumcurrent

图 S sumceurrent 与 remaining_mile 的相关关系

根据图 5 可知，剩余续驶里程 remaining _mile 随总电压 sumcurrent 的分布是发散
的，无明显规律可循，因此二者之间不存在线性相关关系。因此，sumcurrent 将不会
作为关键特征变量进行保留。


($) max tmp 与 remaining mile

160|
1401                                 |
120;

100

“            1
01                1

17.00 17.25 17.50 17.75 18.00 18.25 18.50 18.75 19.00
max_tmpval

 6 max_tmp 与 remaining_mile 的相关关系

根据图 6可知，剩余续驶里程 remaining_mile 与电池单体最高温度 max_tmp 之
间大致呈非线性的负相关关系。由于电动汽车的电池管理系统 CBMS ) 的温度调节
作用，电池最高温度 max_tmp 集中分布在 18 至 19 摄氏度之间，没有持续升高。

《6) min tmpval 与 femaining mile

160|

1401

120;

100

图7 min_tmp 与 remaining_mile 的相关关系

根据图7可知，剩余续驶里程 remaining mile 与电池单体最低温度 min tmp 之间
大致呈非线性的负相关关系，且与电池单体最高温度 max_ tmp 的分布趋势相近。

《7) max _ singlevolt 与 remaining_ mile

10

601      。 卫
40      >
?
201 。。， 区
0   要
3.6        3.-         3.9

5 性                          3.8
max_battery_single voltageval

图8 max_singlevolt 与 remaining_mile 的相关关系

根据图8可知,剩余续驶里程remaining_mile 随着电池单体电压最高值 max_singlevolt
的下降而减少，二者之间呈现非线性的正相关关系。

(8) min singlevolt 与 remaining mile

160|

1401

7
120;                          ee
1

100            加
一                     9

80

 四
601              。 8
401            0

se
全 二。 8
0]j       2
3.5                     3.6                     3.7                     3.8                     3.9
min_battery_single_voltageval

图 9 min_singlevolt 与 remaining_mile 的相关关系

根据图9可知,剩余续驶里程remaining_mile 随着电池单体电压最低值min_singlevolt
的下降而减少, 二者之间呈现非线性的正相关关系。因为电动汽车的电池组是由多个
单体电池串联而成,并通过BMS 进行管理和控制5 ,故max_singlevolt\min_singlevolt、
sumvolt 三者的变化曲线相似。
3.2 ”特征间相关性分析

利用散点分布图能够较为直观地体现与目标变量随特征变量变化的趋势，但对
非线性关系的描述仍存在一定的不足，只能体现变化趋势，缺少量化的分析。因此，
选用斯皮尔曼等级相关系数〈即 spearman 相关系数) 对数据各特征变量之间的相关
性进行量化分析。

吕

冰

凯

3.2.1 斯皮尔

“曼等级相关系数的基本原理
斯皮尔曼等

豚相关系数是月
因其
上

有广泛的普适性。其

(1) 假设两个变
按照升

斯皮尔受等级相关系数的计算步骤如下。
量分别为 X= fxi,xo,xs

于度量两个变量之间相关性的一种无参假设检验[01
无需对数据分布做出任何假设，斯诡尔曼等级相关系数适用于各种类型的数据

或降序排列，
Y 内每个元素在了B 中的位置
和 N=fnl 2,Dn3，

Xp，Y一ty1y2y3，。，
得到对应的有序数列A 与B。将X内每个元素在 A 中的位置
分别记录下来， 形成两

yj。将和X与立同时

mu]，即为入与分别对应的秩次数列nl，
《2) 将集合M 和AN 中的元素对应相减，
d=m -Di， 1<i<n。

企  人
折的数列 M {mi ly2,.In3。..，mn }
得到秩次差数列 D={di,dz,d3,d, 其中
3) 将值代入斯皮尔曼等级相关系数公式;
6 >和1 2
= 工- 一全和                     1
p 的取值范围     其中-1 表示完全反比例关系，!1 表示完全正比例关系，0
表示没有关系
3.2.2 ”变量间相关性分析
为了准确描述各特征变量与剩余续驶里程之间的相关性，
动汽车运行数据进行斯度尔曼等级相关性分析，
两变量对应的方块颜色越浅，
量之间的相关性越

利用 3.1 中同样的纯电
分析结果如图 10 所示。在图 10 中
则二者之间的斯皮尔曼相关系数越接近于 1，表明两变

-1.00

speed -

SuUmVO1tage

Sumcurrent

max_singlevolt

min_singlevolt

Tax_tmpval

min_tmpval

S0C

remain_mile

尼
>
ed]
已
>D
ee
它
个
一

1                                               1
怠           后          鼠          二           三          可          总          员           世
和            2            8            和                        志
员          三           所           问           加           利           且                       所
目            站            岂            3           本           测|                        加
和                             上              性              汉              S                              到
恕             ]             的             近             色             王                           回
1            [                                              -

痢               三

虹                    二

图 10 各特征字段斯皮尔曼相关系数

为便于比较各特征变量与目标变量剩余续驶里程之间的相关性强弱，单独提取

出各特征变量与剩余续驶里程之间的斯皮尔曼相关系数，按照斯诺尔曼相关系数大
小进行排序并可视化，结果如网 11 所示。

13

图 11 各特征变量与剩余续驶里程的斯皮尔曼相关系数

由图 11 可知，speed、sumcurrent 与剩余续驶里程 remain_mile 之间的斯皮尔曼相
关系数都接近于 0，表明 speed、sumecurrent 与 remain mile 之间的相关性很低，与 3.1
中剩余续驶里程的相关影响因素分析的结果相符，故不选用这两个特征参与后续的
模型训练。

由图 10 可知, 存在多组特征变量之间的斯皮尔曼相关系数较大, 共有较强的相关
性，如 max_tmp 与 min_tmp 之间的相关系数为 0.87，max_singlevolt 与 min_singlevolt
之间的相关系数为 0.97，这表明选取的部分特称变量之间有具有一定的共线性,在特征
信息上具有一定的重人要，在后续的模型训练中可选择其中之一来降低特称变量之间
的共线性对祝型训练的影响09 。

4.， 基于梯度提升与递归特征消除算法的剩余续驶里程预测
纯电动汽车的剩余续驶里程预测问题本质上是一个有监督的回归问题，本章基
于纯电动汽车的历史运行数据,结合上一章中剩余续驶里程的关键特征参数分析, 使
用基于梯度提升的回归算法对纯电动汽车的剩余续驶里程进行预测研究。

4.1 梯度提升回归树 〈GBRT) 的基本思想

GBRT 的基本思想是通过迭代训练一系列诀策树来构建一个预测模型。在每次迭
代中,用梯度信息对当前的加法模型进行更新，并使用贪心法找到局部最优解。在整

SS

14

个过程中，损失函数逐渐减小，而模型的性能则逐渐提升0758。GBRT 的计算步骤如
下。

设训练集为 D = {Cxuyi,(xaya),(xsy3) (Csya)}，其中xi 是输入的特征，y; 是和输
出的标签。假设已经训练了ft-1 棵决策树，则第t 棵决策树的目标是拟合前t-1 棵决策
树的残差，设前 tl1 棵决策树的预测结果为:

了一 1(2)    -1 271)                  (2)

其中，第t棵决策树的预测结果为:

灰(Z) 三太一太-1(0z)                  (3)

最终的预测函数是所有诀党树的集成:

矶人) = 下-1(02) 十Q 大(7         (4)

其中，a 表示学习率 〈learning rate)，通常取值为 0.01 到 0.1，用于控制决策树
的权重，防止过拟合。
4.2 ”基于递归特征消除的特征得

由第三章可知, 在纯电动汽车的行驶数据中,大部分的特征参数都与剩余续驶里
程相关，即会对剩余续驶里程的预测产生影响，且特征参数之间也存在一定的相关
性。为了降低特征参数之间的相关性对模型训练的影响，引入递归特征消除 (RFE，

Recursive Feature Elimination) 对特征参数进行算选。

4.2.1 ”递归特征消除的基本思想

递归特征消除 REFE) 是一种基于模型的特征选择算法，通过反复训练模型来易
除较为不重要的特征，直至保留的特征数量降至预设的特征数量021。RFE 算法的基

本步骤如下:
《1)》 使用所有现存特征来训练模型，计算每个特征的重要性并排序
《2) 剔除重要性最低的特征

《3) 重复步骤《1) 和步骤 (2)，直到保留的特征数量降至预设的特征数量1。

4.2.2 ”特征参数筛选

在预设特征数量为 $ 的条件下，使用 RFE 算法进行特征参数的筛选，各特征的
重要性等级及选用情况如表 3 所示，各特征的重要性如几 12 所示。
表3 各特征的重要性等级及选用情况

特征名称                      排序”是否选用
Sumvojltage                         1             True
SOC                               ]             True
max_tmpval                        2            False
min_tmpval                         ]             True
max_battery_single_ voltageval        ]             True
min_battery_single_voltageval         ]             True

SOC
min_tmpval

min_battery_single_voltageval

Feature

max_battery_single_voltageval

sumvoltage

0.0 01 .02 .03 .04 05 0.6

Feature importance

图 12 各特征的重要性

如表2 及图 12 所示,箭选出 sumvolt\SOC min tmp max _singlevolt\min_singlevolt
五个特征来进行汽车剩余续驶里程的建模预测。
4.3 ”训练集与测试集

本文选用车型代码为 123114323 的 24 辆纯电劲汽的 18个 SOC 从 80% 降至 20%
的完整放电户段，其中第 1 至 14 号片段作为训练集，记为 Si 至Si4; 15 全 18 号片
段作为测试集，记为 15至 Sis。

16

4.4 模型参数

梯度提升回归模型的参数如表 4 所示。

表 4 模型部分参数

参数名称        参数含义
loss                               损失函数

learning_ rate
n_estimators
max depth
Subsample
min Samples_split

min_ Samples_leaf

学习率，用于控制每次迭代的权重
用于控制欠代步数
决策树最大深度

空制每次欠代所用数据集大小

内部节点再划分所需最小样本数
叶子节点最少样本数

<

梯度提升回归模型的参数调节步骤如下:

《1) 损失函数选用均方差。

(2) 考虑到模型的复杂性，将 learning rate 设置为 0.1; 在 100 至 500 的区间内
寻找表现最佳的n_estimators 值。

《3)对决策树的结构进行调整,包括 max_depth、min_samples_split 与 min_samples_leaf

竺
人二

通过不断调整模型的众多参数，得到的一个表现最佳的参数组合如表 $ 所示。
表 5 参数调整结果

参数名称       参数值
loss        Squared_error
learning rate                      0.1
Dn_estimators                            200
Imax depth                                 3
Subsample                                  1
min Samples_split                      10
min Samples_leaf                      10

17

4.5 预测结果及模型评估
4.$.1 ”模型评估指标

为了更好地描述模型预测结果与实际剩余续驶里程之间的莽录、更好地反映模
型性能与优化方向，本文将使用四个不同指标来评估该实度提升回归模型:

《1) 最大误差 《ME )，表示预测值与实际值之间的最大差距。

《2) 最小误差《MEoz)，表示预测值与实际值之间的最小差距。

(3 ) 均方根误差 (RMSE，Root Mean Square Error)，又称标准误差，用于衡量预
测值与真实值之间的误差大小。RMSE 的值越小，表示模型的预测精度越高。计算公
式如下:

亿

了          人
RMS= |二2人一的                    (G)
?一]
(4) 均值绝对误差 (MAE，Mean Absolute Error)，用于衡量预测值与实际值之间
的差异大小。计算公式如下:

1 忆        、
MA4已=二> |俯一甸          (0)
?一|
《$) R-squared，用于评估模型拟合度的统计指标。R-squared 的取值范围为0 到
1，越接近 1 表示模型的拟合效果越好。计算公式如下:
oo尺
799

及一Squared =一]一                     (7)

其中SSR (Sum of Squared Residuals) 代表残差平方和，TSS (Total Sum of Squares )
代表总平方和。
4.5.2 ”模型预测结果评估

按照最佳参数组合训练剩余续驶里程预测的梯度提升回归模型，绘制剩余续驶
里程的预测值与真实值的对比图。
按照上述五个指标对模型进行评价，评价结果如表 3 所示。


图 13 Sils 预测值与真实值的对比图     图 14 Sile 预测值与真实值的对比图

一 真实什                                                                      一 真实什
一 巴值 “                                                         一一 预M什

图 1 Sily 预测值与真实值的对比图     图 16 Sils 预测值与真实值的对比图
表6 各指标评结果

ME ME RMSE MAE R-squared

S15 -0.837 -19.109 7.293 ”4.389 0.952
Si16 1.203 -4.332 4237 3.3540 0.980
S17 -1.004 -3.298 3.145 2.399 0.9927
Si18 -1.822 10.306 4.983 3.723 0.9806

由表 6 的各项数据可知，在 4 段作为测试集的纯电动汽车放电片段中，Sis 较其
他三个片段的测试结果而言表现较差，最大误差为-19.109，均方根误差为7.295。从
图 13 的曲线拟合情况来看，预测值与真实值仍存在一定差距。但整体而言，在基于
梯度提升回归树的剩余续驶里程预测结果中，4 段片段的 R-squared 均在 0.95 以上，
MAE均在 SKm 以内且最小值为2.399Km,， 说明该梯度提升回归树模型的拟合程度较
好，但也仍存在很大的改进空间。

$， 总结与展望

随着全球环境污染问题的日益加剧，传统燃油汽车的尾气排放已经对环境造成
了严重的影响。为了缓解这种现状，新能源汽车产业得到了突飞猛进的发展，对精确

19

人NS

预训电动汽车剩余续驶里程的需求也与日俱增。

A

胖

针对这一问题, 本文选取了同一个

号的 24 辆纯电动汽车的历史运行数据，结合机器学习算法，对纯电动汽车的剩余续

驶里程进行了建模预测。本文完成的工作如下:

《1) 汽车历史运行数据的筛选与预处理。从原始数据集中工选出纯电动汽车的车

型数据，在基于此复选出纯电动汽车的历史运行数据，对其进行预处理，并构建剩余

续驶里程字段。将数据按照按照 SOC 变化的范
电片段。

《2) 影响纯电动汽车剩余续驶里程的关键特征参数分

半进行切片，提取出每辆车的单次放

。运用斯皮尔曼相关系数

订
来量化分析剩余续驶里程与各特征参数之间，以及各特征参数相互之间的相关性, 初
步盘选出与剩余续驶里程相关性较高的特征参数。

(3) 基于 REFE 的 GBRT 剩余续驶里程建模
加

预测。通过REFE 对上一步保留的特征

问量进行二次簿选，找到表现最佳的特征变量组合。运用 GBRT 算法预训纯电动汽

车的剩余续驶里程，并对预测结果从最大误差、
送、R-square 五个角度进行分析。

最小误差、均方根误差、均值绝对误

最后得到的预测结果中，四个测试片段的MAE 均在 SKm，R-squared 均在 0.95

以上，说明该模型具有较好的拟合能力，但也存在着很多的不足之处:
《1) 训练数据的规模较小。原始数据经过筛选和预处理之后，符合SOC 从 80 降

至 20 的放电片段只有 18 段，数据量整体不大。

法自动生成更多数据，扩大数据规模，提高数据质量。

未来可以采集更多的数据或是使用算

《2) 特征参数的纬度较少，只选用了 5 个特征参数参与模型训练。未来可以党试

根据先验知识或算法构建更多特征参数，扩充数据维度。
《3) 本文只使用了 GBRT 一种回归算法预测纯电动汽车剩余

TS

卖驶里程,未来可以

AN

选用多种机器学习算法融合的方式，提高模型的性能。

20

D]

[]

[5]

[0

[7]

[]

[9]

[10]

[HH

[12]

[13]

[14]

参考文献

王韶华. 基于低碳经济的我国能源结构优化研究[D]. 哈尔滨工程大学, 2013.
BIJ WANG Y, SAI Q, et al. Esttmating remaining driving range of battery electric

vehicles based on real-world data: A case study of Beijing, China[J]. Energy, 2019，
169(FEB.15): 833-843.

郭文双, 申金升, 徐一发 电动汽车与燃油汽车的环境指标比较[叫. 交通环保，

2002, 23(2): 4.

张文亮, 武斌, 李武峰, 等. 我国纯电动汽车的发展方向及能源供给模式的探讨

四. 电网技术, 2009(4): 5，

从晓东，  吕叶林, 许可. 基于 GRU-NN 模型的电动汽车实时能耗预测方法
通节能与环保, 2022(004): 018.

ZHAOL, YAO W, WANGY U, et al. Machine Learning-Based Method for Remain-

ing Range Prediction of Electric Vehicles[J]. IEEE Access, 2020, 8: 212423-212441.

田蝶, 甘志恒, 吕清. 基于改进符导回归和 XGBoost 算法的剩余续驶里程预测方

法四. 广西师范大学学报: 自然科学版, 2022, 40(2): 10.

LAMANTIA M, SU Z CHEN P. Remaining Driving Range Estumation Framework

for Electric Vehicles in Platooning Applications[C]//2021 American Control Confer-
ence (ACC). 2021.

相. 交

广一

AYEVIDEF 下,KELOUWANIS AMAMOU A, et al. Estimation of a battery elec-
tric vehicle output power and remaining driving range under Subfreezing conditions
[JZOL]. Journal of Energy Storage, 2022, 9: 109934. https://www.Sciencedirect,co
Im/sciencey/article/pil/S23S21S2X22015436. DO[L https://doi.org/10.1016/.est.2022
.105354.

FRANKET ,KREMS JF. Interacting with limited mobllity resources: Psychological
range levels in electric vehicle use[J]. Transportation Research Part A: Policy and
Practice, 2013, 48(EFEB.): 109-122.

高航. 基于机器学习的纯电动汽车的行驶里程预测研究[D]. 北京交通大学,2018.
刘光明, 欧阳明高, 卢兰光, 等. 基于电池能量状态估计和车辆能耗预测的电动汽
车续驶里程估计方法研究[中. 汽车工程, 2014, 36(11): 9.

李中耀, 李达峰. 纯电动汽车剩余续驶里程计算方法研究[加. 汽车零部件，
2021(004): 000，

XIAOFEN J YONGCUN G, YOURUI H, et al. 基于斯皮尔曼等级相关性的彩色
图像概盐噪点检测算法[中. 中国科学技术大学学报, 2019(001): 049.

21

[15]

[10]

[7]

[13]

[19]

[20]

页科, 杨哲, 魏超, 等. 基于斯皮尔曼等级相关系数的新能源送出线路纵联保护
器. 电力系统自动化, 44(15): 103.

吕清. 基于数据的纯电动车剩余续驶里程建模与预测研究[D]. 华南理工大学，
2021.

鸡越, 罗小芹, 王磺海, 等. 基于梯度提升回归树的城市道路行程时间预测品. 浙
江大学学报; 工学版, 2018, 52(3): 8.

韩户迪, 张小桐, 申维. 基于梯度提升决策树 (GBDT) 算法的兰性识别技术[四. 矿
物宕石地球化学通报, 2018, 37(6): 8.

吴辰文, 深靖涵, 王伟, 等. 基于递归特征消除方法的随机森林算法[四. 统计与决
策, 2017(21): 4.

毛勇, 皮道映, 刘育明, 等. 基于加速的文持同量机回归特征消去方法的关键变量
辨识加. 中国化学工程学报《〈《英文版)2006, 014(001): 65-72.

22

致谢

提笔到这里, 我的四年大学生活也即将随着论文的结束而画上一个句吕。借此机
会，我想同那些一直以来给予我敬励、文持和帮助的人表达最诚挚的感谢。

首先，我要感谢我的导师宋轩老师、副指导老师余庆老师对我的指导和帮助,使
我受益菲浅。同时, 我也要感谢课题组的学长学姐和同学们,感谢创新实践的队友们，
感谢一直以来的陪伴和帮助。

其次,我要感谢致新书院和计算机系的老师们，感谢一直以来的教导、关心和帮
助。同时, 还要感谢我的家人和朋友们, 你们的鼓励和支持是我克服困难的最大动力，
也是我遇到困难时最坚强的后盾。

最后，再次诚挚地感谢所有支持和帮助过我的人,尽管我无法一一列举，但与你
们的相识是我最大的笠运，谢谢你们!

23
