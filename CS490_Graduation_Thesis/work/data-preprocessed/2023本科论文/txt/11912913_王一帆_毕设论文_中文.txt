动寺用技炎学

9OUTHERN UNIVERSITY OF 9CIENCE AND TECHNOLOGY

本科生毕业设计《论文)

题 目:               基于纽约州新冠疫情数据的
人类出行可视化

姓 名:                                         王一帆

学 号:11912913

系 “”别:         计算机科学与工程系

专 “业:                    计算机科学与技术

指导教师:                         宋轩 副教授

2023 年6月2日

诚信承诺书

1. 本人郑重承诺所呈交的毕业设计《论文)，古在导师的指导
独立进行研究工作所取得的成果，所有数据、疼片资料均真实可靠。

2. 除文中已经注明引用的内容外，本论文不包含任何其他人或
集体已经发表或撰写过的作品或成果。对本论文的研究作出重要页
献的个人和集体，均已在文中以明确的方式标明。

3. 本人承诺在毕业论文《设计) 选题和研究内容过程中没有抄袭
他人研究成果和伪造相关数据等行为。

4. 在毕业论文《设计) 中对侵犯任何方面知识产权的行为，由本
人承担相应的法律责任。

作者签名:
年  月


基于纽约州新冠疫情数据的
人类出行可视化

王一帆
《计算机科学与工程系，指导教师: 宋轩)

[摘要] : 新冠肺炎 〈COVID-19) 疫情对全球人类出行活动产生了重大影
啊。为了更好地理解和分析疫情期间的人类出行行为，本研究设计并实
现了一个基于开源 DeckGL 的可视化技术的新冠肺炎疫情人类出行活动
分析系统。该系统以全球范围内的出行数据为基础，通过可视化展示人
类出行活动的时空分布和变化趋势，帮助决策者、研究人员和公众更好
地理解疫情期间的人类活动模式，并为疫情防控和公共政策制定提供科
学依据。本项目以 2020 年纽约州各兴趣点的访问情况为例，以周为单位
测试系统并答试分析了疫情期间人类的活动。系统提供的分析包括热力
图和 OD 地图 (Origin-Destination Map)，同时提  全了人下个 同地点的访
问量进行筛选的功能。同时，该系统拥有对海量数据进行快速演染的能
力。在未来，该系统不仅可以展现新冠疫情的可视化，也可以为各种人
类大规模流动事件提供可视化的可能

[关键词]: 新冠疫情，人类出行活动，可视化

[ABSTRACT|: The COVID-19 pandemic has had a significant impact on
gobal human travel activities. To better understand and analyze human travel
behavior during the pandemic, thls project deslgns and Implements a COVID-
19 human travel activlty analysls System based on the open-source DeckGL vi-
Suallzation technology. The purpose of this System ls to help decislon-makers，
researchers, and the public gain a better understanding of human activlty pat-
terms during the pandemilc and providing sclentific evidence for epldemilc pre-
vention and public policy formulation. The System ls tested and used to analyze
human activlties during the COVID-19 pandemic in New York on a weekly
basis，The analysis provlided by the system includes heatmaps,，gridmaps and
origin-destination maps, along with the abllity to flter based on the visitation
volume of diffterent locations. Additionally, the System possesses the capabil-
ity to rapldly render massive amounts of data， In the future, thls System can
not only visuallze the COVID-19 pandemic but also provide visualizations for

varlous large-Scale human mobility events.

[下ey words]: COVID-19，human travel activities，visualization technol-

98y

工

1. 引言 1
2. 相关研究 . 2
3. 数据库 . 2
3.1 数据来源 . 2
3.2 数据详情 . 3
3.3 数据分类 4
4. 系统设计 .4 $
4.1 后端系统 . 6
4.2 前端系统 .4 7
4.2.1 用户界面层 C(UI层) .0 7
4.2.2 可视化组件层 . 7
4.2.3 数据转换层 .4 8
4.2.4 可视化计算层 . 8
4.3 地图系统 . 9
S. 系统应用案例分析 . 10
5.1 疫情背景10
5.2 分析网表 .| 11
$.3 纽约州第一次疫情爆发分析 .4 12
5$.3.1 热力网比较 13
5.3.2 网格网比较 13

[IJ

$.3.3 0OD 图比较 . 14

$.4 纽约州第二次疫情爆发分析 . .4 15
5.4.1 热力图比较 .8 15
5.4.2 网格图比较 .8 16
S$.43 0OD 网比较 .   16
5.3 系统其它功能简介 .8 17
5$.$.1 疫情期间纽约州访问量最高地点 .4 17
5$.5.2 基于地点类型的得选 . .4 17
6. 结论 . 20
6.1 不足之处 20
6.2 优点 20
6.3 未来展望 . 21
参考文献 . 22
致谢 . 24

IV

1.， 引言

新冠疫情对人类社会造成了巨大的冲击，不仅对公共卫生和医疗系统产生了严
重压力，也对人类的出行活动和行为模式产生了深远的影响。在疫情期间，各国纷纷
采取了限制措施，如封锁、社交距离和旅行限制等，以遏制疫情的传播。这些措施导
致了人类出行活动的急剧下降和改变，从而对社会经济、交通运输和城市规划等领域
产生了重大影响。

为了更好地理解新冠疫情对人类出行活动的影响以及相应的社会变化，研究人
员和政策制定者需要深入分析和可视化相关数据。可视化作为一种强大的工具, 可以
帮助我们直观地理解和传达数据的复杂性,提供洞察和决策支持。通过可视化人类出
行活动数据, 我们可以揭示不同地区、不同时间段和不同人群之间的出行路线和出行
次数变化趋势，进一步研究疫情对交通流量、交通方式选择和城市规划的影响。

可视化人类出行活动的挑战在于处理大规模和多源的数据。研究人员需要整合
和分析来自不同数据源〈如移动电话数据、交通传感器数据、社交媒体数据等) 的多
模态、多维度数据，以获得全面而准确的出行活动信息。同时，数据的隐私和安全性
也需要被考虑，系统需要采用采用适当的数据处理和可视化技术，以保护个人隐私并
防止信息泄露。

同时，研究人员还需要关注可视化的应用领域和目标。例如,我们可以探索如何
利用可视化工具来评估旅行限制政策对不同人群〈如工作者、学生和老年人》 的影
响，以及在疫情期间如何优化交通规划和公共交通系统。此外，我们还可以研究如何
利用可视化来传达疫情期间的交通流量、人群密度和社交距离等重要信息，以帮助公
众和决策者更好地理解和遵守防控措施。

综上所述，基于新冠疫情的背景下，研究人类出行活动的可视化具有重要的意
义。通过深入分析和可视化相关数据, 我们可以更好地理解疫情对出行模式和社会变
化的影响,并为应对疫情和未来的城市规划提供科学依据和决策支持。这将有助于改
善公共卫生措施、优化交通规划和促进社会可持续发展。

必

人


2.， 相关研究
距离 COVID-19 疫情爆发已经有 4 年之久，在此期间涌现了许多关于出行模式
和人类流动性的报告和研究，有一篇著名的基于中国新冠疫情数据进行的可视化分
析论文巾，为了更好地了解 COVID-19 对交通相关行为的影响，并提供更具针对性的
防控措施，作者使用百度地图收集的大量人类流动数据，详细研究了疫情期间人们
的反应情况。有具体而言，我们从交通方式、访问场所类型、场所签到时间、“起点-终
点”距离偏好以及“起点-交通方式-终点”模式等角度对疫情期间的交通相关行为进
行数据驱动分析.，这篇论文也给了我很多对新冠疫情数据分析方法的启发。但很多
报告都缺少可视化层面的分析。同时, 一些科研工作者提出了评估居民活动的模型品，
另一些人则正在尝试利用神经网络预测新冠疫情的发展6。但几乎所有的相关工作都
需要一个可视化工具来直观地展示自己模型的模拟结果或是对现有疫情状况的评估，
因此，开发一个疫情可视化系统就显得十分重要。

同时，之前也有相关关于新冠疫情的可视化系统，该系统内开发了一个可视分析
环境，使公共卫生官员能够通过提供县级信息〈如人口、人口统计和医院床位) 对新
冠疫情的传播进行建模、模拟和探索。该环境通过具有链接统计视图的地理空间地
图,使用户能够探索与新冠疫情相关的时空模型模拟数据,根据不同时间点应用不同
的决策措施，并了解其潜在影响。但是，该系统只是对人口与公共卫生部门开发了可
视化系统，并没有针对整个城市全部类型的地点进行分析。同时，也有一些基于葡萄
牙地区的新冠疫情实现的可视化系统隔, 开发者通过社区基础的追踪基础设施来了解
COVID-19 疫情期间的人类流动，以对比其传播情况。有具体而言，该基础设施在葡萄
牙马德拉群岛的 81 个兴趣点部署，可以收集大量的时空数据，并可以与其他潜在独
立数据源〈如冠状病毒感当人数) 和市民提供的众包数据相结合。这两篇可视化论文
对我的可视化系统提供了非常重要的设计思路。
3， 数据库
3.1 数据来源

在本项目中，地理和人口流动数据来源于 SafeGraph[44。SafeGraph 是一家提供地
里位置数据集的公司。他们的数据集包括全球各地的地点信息，提供了丰富的地理

六

|


位置数据。其中，我使用数据的最小地理单位为兴趣点[] 《Point of Interest，简称为
POI), 它指的是在地图上具有特定兴趣或重要性的地点、建筑物、景点或其他地理实
体。这些地点通常是人们在旅行、导航、定位或搜索时感兴趣的目标。在本项目中，

我使用了 Places 和 Weekly Patterns 数据集，前者是一个收集 POI 信息的列表，包括

POI 的经度和纬度、位置名称、位置类型。后者则为每周的收集每个 POI 的访问数
据。每个条目是从每周访问中收集的信息，包括 POI ID 〈每个 POI 都有一个独立的
identification，这里简称为ID)、时间、访问人数、每天和每小时的访问时间以及CBG
所属情况〈Census Block Groups，人口普查区块群交的数据。CBG 是美国人口普查

局用来表示较大人口普查区内小而相对均质的地理单位。它是对美国国土进行精细

划分的一种方式，用于收集和报告人口统计数据。CBG 是在人

口普查区块〈Census

Blocks) 的基础上建立的。人口普查区块是人口普查局定义的最小地理单位，通常是

街区或其他实体的边界。而 CBG 则是由相邻的人口普查区块组成的较大地理区域。

一个 CBG 通常包含 600 至 3,000 人，并根据人口密度、住房类型和社会经济地位等

因素进行定义，每一个 CBG 都拥有一个 12 位的数字作为它们的也，它们用于提供

关于较小地理区域的人口和住房特征的更详细信息，并常用于人口统计研究和规划，
以及政府资源和资金的分配。在本研究中，CBG 将作为基本地理单位。

3.2 ”数据详情

为了探究 COVID-19 对旅行行为的影响,本系统使用了 2019 年和 2020 年北美居
民出行流量的数据集。原始数据集的总大小接近 200G，以周为单位,包含了 2019 年
至 2020 年间美国全境的 POI 访问数据。数据集总共有 105 个周，

每周约有 4,000,000

条数据项。由于存储设备的限制，本研究并没有选取整个美国的数据集进行分析，而

是选择了比较具有代表性的纽约州数据作为系统运行的案例。在进行数据提取的操

作后，纽约州共有 292,.092 个 POI。我将 POI 数据与 POI 访问数据进行 匹配，以便将
位置信息与访问者信息进行上配。合并后，每周剩下 2$$,251 个 POI 和 20,919.987 个

POI 访问记录。最终，提取数据信息的条月如表 ]1 所示:

其中，关于地点的分类，我这里使用了 NAICS (North American Industry Classifi-
cation System，北美产业分类系统)，这是一种用于对经济活动进行分类的标准系统。


表1 POI 访问数据原始条目

名称     数据类型         案例
POI ID               字符串 | sg:001e39c6b18645a5950b13a278b242c3
POI 名称              字符串                         Peking House
POI 所在城市           字符串                         Ozone Park
POI 所在区域             字符串                                     NY
POI 统计起始时间 “| 时间类型            2019-12-31T00:00:00-05:00
POI 统计结束时间 “| 时间类型            2020-01-07T00:00:00-05:00
POI 访问次数总和             整数                                             77
POI 访问人数总和           整数                                        61]
POI 访问日期      列表          [12,2,16,13,18,11,5]
POI 每小时访问次数         列表                     [0,1.0,0,0,0,0.0,2,1.0,1, …]
居民访问的起始 CBG | “列表 “| [3608101180022:4.”3608100400212:4, …]
经度                     小数                                40.67975
维度                     小数                               -73.97462
类型                   NAICS                              testaurant

它被广泛用于美国、加拿大和墨西哥等国家，用于统计、分析和比较不同行业的数

据。NAICS 将经济活动划分为多个层级的分类代码。每个代码都表示

个特定的行

业，包括制造业、建筑业、金融业、教育服务、医疗保健等。这些行业按照其相似性

和关联性进行组织和分组。

时
[

NAICS 中，每个行业都被分配一个唯一的标识码，这

个标识码由一系列数字组成, 用于表示行业的层级关系。例如，制造业可能被分配为
“31-33”，而医疗保健行业可能被分配为“62”。

3.3 数据分类

之后,通过查询每一个地点的分类并进行匹配， 我最终得出了疫情期间纽约州所
有 POI 的分布，如图 2 所示。可以看出，不同类别的比例差异很大。总体而言，服务

业【〈和包括 Healthcare，Restaurant，Service) 占据了总POL数量的近
经常访问的地点都是提供服务的场所。

半，大部分人们

4.， 系统设计
有的后端数据处

hotel

entertainment||L_1加
69%

school|
3%

healthcare
189%

19%

transportation|

restaurant
189%6

other _retailer

20%

图 1 地点类型分布图

在系统设计方面,考虑到用户的友好和兼容性，我将整

操作将由传统的 Python 语
库如 NumPy00, Pandas00, Matplotlib 等可以非常便捷地处民

言由完成，Python 中包括

service
159%6

grocery_store
496

个系统继承为了网页，所
4一些重要的
和数据并导出成为 CSV 文

件〈《Comma-Separated Values，一种常见的文本文件，用于存储和交换简单的表格数

据。) 和 Json 文件〈一种轻量级的数据文件，
据。) 供前端系统使有

React 框架59]。之所以选择 DeckGL 这到开庆 JavaScript 库是因为以下几点原因;

。多种图层类型: DeckGL 支持多种图层类

模的地理数据。它利用 GPU 〈Graphics Processing Unit》 加速，提供

和交互体验，适用于处理大量数据的疫情可视化。

型，如散点图

DeckGL 使用 WebGL04进行泻染，能够在现代浏览器中快速泻染大
流畅的动画

、热力图、路径图等，

常用于通过网络传输和存储结构化数
肯，而前端系统我则使用 JavaScript 开发，结合了 DeckGL 库03与

人

让

可

以根据不同的数据类型选择最适合的久层进行展示。这使得在疫情可视化中展
示各种数据变得更加灵活和多样化。

。 易于集成: DeckGL 可以轻易与我使用的前端框凡 React 以及地图库集成。

4

。可扩展性: DeckGL 提供了灵活的插件系统和可自定义的图层开发接口，使开
发人员可以根据自己的需求扩展和定制功能。这使得在疫情可视化系统中，可
以根据特定的数据需求深加自定义的图层和交互功能。

而选用 React 的理由是它作为工业界非常广泛应用的一款成熟的框架，集成了很多用
户友好的交互模块供开发者选用。
4.1 后端系统

由于该项目的数据没有实时性，系统的后端代码的主要作用只是对原始数据的
处理，并没有实体的数据库。以下我管理原始 POI 数据并构建数据库的过程;

呈

1. 提取和合并纽约市的POI 和 POI 访问数据: 这一步涉及从前文提到的两个数据
库收集与纽约市的POI 和 POI 访问相关的数据，并将它们合并为一个数据集。

2. 创建一个 CBG 索引表: 将每一个 POI 映射到它们各自所属的CBG，该表将用
于通过地理区域对数据进行转换。考虑到过多的 POI 可能会集中在地图的一个
地方, 本项目将使用这个索引表实现POI 到 CBG 的映射, 并将所属同一个CBG
的 POI 数据累加。

3. 建立 OD 地图数据表: 这个表将用于显示个人出行的出发地和目的地。这些数
据将用于创建可视化图表，展示在疫情期间人们在纽约市不同区域之间的流动
情况。同时，删除表中没有用的字段如地点的类型，时间等等。

4. 结合谷歌地图,合并 OD 数据表和经纬度，并给每一个 POI 标注其对应的类型。

经过系统提取整合后传输给前端的数据最终如表 2 所示。

最终， 为了更加简化,整个数据经过筛选后将会变成由多个以周期为单位的表构
成的数据集，项目的初始阶段我使用了 Springboot05和 MySQL04的架构构建整个系
统的后端，但最终的效果很不理想，原因是由于数据过于庞大导致后端传输给前站
的数据量过大，整个演染流程可能会长达 1-2 分钟，为了使整个系统显示数据的速度
更快，我决定最终直接使用 Python 将所有数据转化为 CSV 文件并按照批次传输给前
冰，考虑到整体的数据量非常庞大，所有数据都被人为切分成了以星期为单位的形

也

6

式并输出为 CSV 存储，如图 2 所示，每一个 CSV 中包括了一星期中纽约市的市民活
CSYV 的模块且会通过 GPU 加速泻染，最终整个数和

动。由于 DeckGL 中自带有处到
的展示变得十分

表2 POI 访问数据原始条目

4.2 前端系统
前端系统我选取了 DeckGL 中的 KeplerGL 架构[4，整个架构采用了层与层之间

分离的方式，通过数据流和状态管理

名称   数据类型   案例
起始 CBG ID | 字符串 | 360850277021
终点CBG ID | 字符串 | 36085$0277022
起始地点经度 | “小数       40.5790373
起始地点维度 | ”小数       -74.1573361
终点地点经度 | ”小数        40.580142
终点地点维度 | ”小数       -74.1661584
访问次数总和 | ”整数      366
起始地点类型 | NAICS           61
终点地点类型 | NAICS           85

卫生

来实现地到

数据的可视化和分析。它提供了强

大的功能和灵活性，使用户能够直观地探索和分析大规模的地理数据集。通过使用

符合 2023 年的 JavaScript 规范的前端代码08] 与 React 纪
可) 系统，有具体分为以下几层。

Jnterface，

用户界

4.2.1 用户磺面层 〈UI层)

KeplerGL 的前端架构用户界面层主要负责与

输入并与月

日户交互。

4.2.2 可视化组件层

现地图、图表、控件、接受收有

这一层包含各种可视化组件，妇

并进行交互式分析。所有的可视化

吕

散点图、热力图、轨迹线等，用于呈现地理数据

架构，我实现了整个 UI〈User

户

日件的基本单位都是图层。显示某一种视图只需:

导入所需的图层，而 DeckGL 提供了多种图层类,每个类对应于不同类型
或可视化效果。在本项目中，我主要是使用了三种图层:

4的地和

数据

散点图图层〈ScatterplotLayer): 用于在地图上显示散点数据，每个散点表示一

个地理位置。用户可以配置颜色、大小、形状等属性来表示不同的数据特征。

。六边形图层 (HexagonLayer): 用于创建热力图效果，将地理空间划分为六边形
网格，并根据数据密度在每个网格上显示不同的颜色强度。
。呈线图层 (ArcLayer): 用于显示连接两个地理位置之间的弧线，通常用于可视
化移动路径、交通流量等。
在导入所需的网层类之后, 我还需要创建图层的实例。通过实例化图层类设置图
层的属性和样式，指定图层的数据源、颜色、大小、透明度等。最终，我会通过使用

其 addLayer 方法将图层添加到视图中以便进行泻染和显示。视图是指 DeckGL 的主
且疼层添加到视岁中，用户可以通

上

要组件，用于管理图层、交互控制和深染和输出。
过修改图层实例的属性来配置和更新疼层。例如，改变数据源、样式、
以实时更新可视化效果。

光

4.2.3 ”数据转换层

KeplerGL 的后端架构涉及地理数据的处理和分析。它可以处理不同格式的地理

过滤条件等

数据，如 GeoJSON、CSV、Shapefile 等。该层负责将数据加载到前端，并进行必要的
数据转换和预处理。在这里,我主要是通过外部数据源加载数据。我一共集成了三种
加载器〈CSVLoader、JSONLoader、GeoJsonLayer )，这三种插件分别可以处理 C
JSON 和从这些数据源中加载数据，并将其传递给相应的图层进行可视化。

4.2.4 可视化计算层

一层负责执行各种地理数据的可视化计算，如聚合、分类、过滤等。

人

已

户的可视化配置和交互操作生成可视化效果，并将结果返回给前端进行呈现。

最终，整个系统前端的处理过程如下图所示:

根

SV，

用


U] ]ayeT         show the figure

图 2 前端系统处理数据流程

4.3 ”地图系统

DeckGL 与著名的地图提供公司 MapBoxt9有着密切的合作，整个库对市面上几
乎所有的主流地图都有着十分完美的兼容。在我的系统中, 我选择了最广为人知的谷
歌地图ec0，它提供了丰富的 API (Application Programming Interface，应用程序编程
接口) 和开发工具，使开发者能够构建基于谷歌地图的应用程序，并与其他谷歌服务
集成，如地理编码、定位服务等。

DeckGL 主要提供了两种图层泻染方式PC0: 交错泻染和肚加泻染，这里我使用的
是登加演染。如图 3 所示 Deck 的画布将以一个独立的 DOM 元素〈Document Object
Model，DOM 元素指的是在 Web 页面中可识别和操作的一个单独的部分，可以通过
JavaScript 等编程语言进行访问和操作) 形式亚加在底图上进行泻染。Deck 的相机和
底图的相机会进行同步, 因此它们可以一起进行平移或缩放。对于本系统来说这是更
稳健的选项，因为这两个库可以独立管理它们的演染。考虑到我的地图只是 2D 的谷

歌地图，这种泻染完全符合要求。

mapbox
building layer

DOM composition

mapbox
label lay:

图 3 DeckGL 与地图层结合展示

5， 系统应用案例分析

5.1 疫情背景

根据美国纽约州政府官网的通告捕，我截取了最上共有代表性的纽约州 2020 年 3
月初至第二年的 1 月初的疫情数据来测试我的系统。我将上文预处理好的 105 周数

据按照时间顺序画出了每周访问量变化图，见

图4，在这里，我并没有统计新和冠患者

的流动情况, 所有实验中应到的人数都是代表整个纽约州的流动,我认为这样更能

映出居民在疫情区间出行的变化。

1e6                total counts of each Week

2.5

2.0
癌
帮
已
3 1.5

1.0

0.5

0          20          40          60          80         100

weeks (from 2018-12-31 to 2020-12-18)

图 4 每周 poi 访问总量的变化

在这 105 周内，从第 55 周开始，纽约州疫情爆发，整个纽约州疫情主要分为以

下几个阶段:

。初始阶段 (2020 年3 月至4 月初): 疫情在纽约州迅速蔓延。首例新冠病例报

告于2020年3月1日,此后病例数量急剧增加。疫情达到第一个高峰是在4月

10


增

4上日，当天
始又降。

久

。夏季和秋季 (2020 年 $ 月至 10 月):
纽约州的疫情得到了一定的控逢

病例数达到近

|。

低的水平。媳

整个夏季和秋季期间，病例数量

整个人口流动总量则

。 再次上升 (2020 年 11

-

出现反弹。
具

一

坑

病例超过

上

。 年末和新年期间〈2020 年

续严峻。

情持

10,300 例。

12 月至

12 月底至2021年1月

以上，给医疗系统带来了巨大压力。然而，

月至 12 月):

11;600 例。如图 $ 所示，人口流动量

由于采取了

格的入

和第 60 周开

F交隔离和封锁措施，

$ 月初，病例数量逐

呈现一个绥盆上升的趋势。

随着天气转冷和入

病例超过 4,800 例;

至渐下降，维持在相对较
旦仍需保持警惕，而

[交活动增加，疫情再次
11 月以后，纽约州病例数量急剧上升，成为 2020 年的第二个高峰。
体来说，11 月 10 日，纽约州单日新增

12月4

2021 年 1 月):， 在强

通过进

E底和

和革年假期期间，疫

初，纽约州每日新增病例数保持在数千例
步的防控措施和疫苗接种

的推进，病例数量开始逐渐下降。
5.2 分析图表
该可视化系统的功能主要为可视化数据的热力图,网格岁和 OD 岁。三者都是可
视化工作中不可或缺的一部分
。热力图《Heatmap): 热力图通过使用颜色编码在地图上显示数据的密度或强度
分布。在新冠疫情可视化中，热力图可以用来表示感染病例的分布密度。通过
网察热力图，我们可以快速识别疫情的高风险区域和热点，帮助决策者更好地

分配资源和佣

“。OD 图 COrigin-Destination Map): OD 图显示了人类
动。在疫情可视化

以显示人们的移动

的淤在路径和风险区域。
评估传播风险，并制定适

上定针对性的干预措施。

活动中起点和终点之间的流

|

中，OD 匈可以用来展示人群流动和交通流量的变化。它可
倪势、旅行路径和热门目的地，从而帮助我们了解疫情传播
通过分析 OD 图，我们可以识别人员流动密集的区域，

当的限制措施，如旅行限制或隔离措施。

。 网格图Grid Map): 网格图可以将大范围的数据分布细分为多个小区域，并以
直观的方式展示每个区域的数据情况。通过将地理区域划分为网格，可以更清
晰地了解数据的空间分布特征，揭示数据的集中区域和分散区域。

在之后的分析中,我将选取两个非常典型的时间点,结合系统的筛选功能重点展
示上述三种可视化功能。

5.3 ”纽约州第一次疫情爆发分析

2020 年 4 月是美国纽约州第一次疫情爆发的时刻，为了展现疫情前后居民出行
的变化，我分别选取了 2019 年与 2020 年4月初的第一个星期作为例子进行比较。首
先，如上文所述，我设计的数据库中的每一列呈现的是从一个 poi 到另一个 poi 的轨
迹以及次数，通过统计每一条行动轨迹上人们行动的总次数，我得出了两周 poi 访问
总数的图，见图 $。

250000

200000

150000

100000

50000

0
0~5   5~10 10~20 20~30 30~40 40~50 50~100 >100

60000

40000

20000

0~5   5~10 10~20 20~30 30~40 40~50 50~100 >100

图S$ 2019 年4月第一周与 202 年4月第一周 poi 访问总数的对比

我将不同访问次数分为了几个区间统计, 分别为 0-5 次，$-10 次，10-20 次，20-30

12

次，30-40 次，40-50 次，50-100 次以及 100 次以上，通过两张图我们可以看出， 疫情
爆发后的一年,人们的出行次数大概为疫情爆发后一年的四分之一，当整体访问次数
的分布相较于疫情爆发前却没有明显的变化。

5.3.1 ”热力图比较

首先展示的是将纽约市居民活动的热力图。如图6 所示，颜色的深浅代表了人们
访问该地区的次数，颜色越接近红色则次数越高。在 2019 年，一共有 2,184,515 次兴
趣点访问被记录, 大多数兴趣点的访问集中在曼哈顿的中城和下城地区，而其他地
的兴趣点访问更分散，但仍存在一些高访问量的地区。而到了 2020 年第一个疫情人
峰期，总访问量已经又降到 510,748 次，可以看到红色区域的面积已经明显少于 2019
年, 即使人们依然会大规模地访问一些商业中心地区, 但纽约州总体的人口流动量已
经有了明显的下降。

\

于

2] 2019-04-08 兴趣点访问量热力图   b) 2020-04-08 兴趣点访问量热力图
图 6 第一次疫情周期热力图展示

S$.3.2 ”网格图比较

同时,我切换到了网格图模式, 在这个模式下将纽约市划分为许多小网格的网格
地图。如图 7 所示，每个网格都包含许多兴趣点，系统会将每个网格中的所有兴趣点
的数量相加。颜色由蓝到红为兴趣点在一个区块中的数量由少到多。为了排除过少兴
趣点数量的区块依旧会被演染出来而导致的视觉上的误差,我添加了过滤器， 只有超
过 10 个兴趣点以上的网格才会被显示在 UI 中。从感官上来看，网格图相比于热力
图，更能体现出的是人类活动的具体的区鼎。可以看到，第一次疫情前后人们的不仅


仅减少了出行的次数，也同时减少了出行的地点。但是，商业中心和学校等地区的红
色表了明表明人们即使在疫情期间也需要经常抵达日常生活中必要的地点。

a) 2019-04-08 兴趣点分布网格图               b) 2020-04-08 兴趣点分布网格图
图7 第一次疫情周期网格图展示

S.3.3 0OD 图比较

之后，我又测试了 OD 网的显示，如前文所述，考夸到访问次数低于 10 次的轨
迹依然数量很大，在之后的 OD 图中我将使用过滤器过滤邱访问次数 50 以下的 OD
线，如图 8 所示。这样做一方面保证了我们可以十分直观地看出人们一周中更多会去
到那些地点，一方面也为系统的演染减轻了负担。最终经过筛选后，访问量小于 50
次的连线将不会显示在系统中。对于本系统来说，OD 岁是最为直观能表现人类流动
的显示方式。在 2019 年中，人们会大规模往返于交通枢纽，机场和大型的购物中心，
然而到了 2020 年疫情爆发，只有很少量的线被显示，而且绝大多数的线的指向都是
购物中心, 这说明了在疫情期间绝大多数人还是采取了居家隔离的方式， 只有必要期

a) 2019-04-08 居民移动 OD 图                b) 2020-04-08 居民移动 OD 图
图 8 第一次疫情周期 OD 图展示

5$.4 纽约州第二次疫情爆发分析

从2020年4月起, 纽约州实施的“PAUSE”(缁约州疫情暂停) 政策 初见成效，
从之前的分析中可以看出居民的出行的次数大幅减少, 但是,在疫情颁布后的时间即
5 月到7 月份，美国民众越来越不满政府居家隔离的政策。随着天气变化和社交活动
的逐渐增加，疫情再次出现反弹。可以从总访问量的图 9 中看出，即使是只有 0-5 次
的出行路径，数量相较于 4 月份也增长了近两万次。而整体访问次数的分布相较于
4月份依旧没有明显的变化。我们可以通过三种视图进一步分析纽约州第二次疫情爆
发的原因。

80000

60000

40000

20000

0~5   5~10 10~20 20~30 30~40 40~50 50~100 >100

100000

75000

50000

25000

0
0~5   5~10 10~20 20~30 30~40 40~50 50~100 >100

图9 2020年S$月第一周与 2020 年 12 月第一周 poi 访问总数的对比

5$.4.1 热力图比较

首先是热力甸，如图 10 所示，可以看到政府实行了限制社区活动的政策后的几
个月,居民出行的次数虽然增多。但大规模出行体现在街区内仍然不明显。颜色相较
于5月份甚至在繁华街区内更浅，这似乎与图 10 总访问量更高的数据不符。

14

a) 2020-0S-04 兴趣点访问量热力图         b) 2020-12-28 兴趣点访问量热力图
图 10 第二次疫情周期热力图展示

S$.4.2 ”网格图比较

而网格图展示了出了热力图出现巴盾的原因，在图 11 中可以看出，昌然居民没
有很明显地大规模出行， 但出行的地点其实并没有减少，虽然大部分兴趣点大部分只
有 1-2 次的访问，但是这依然体现了纽约市的人口流动的范围其实相较于$ 月份已经
有所增加，尤其是图中史泰登名和纽约州立大学附近的街区颜色明显加深。

a] 2020-0S-04 兴趣点分布网格图              b) 2020-12-28 兴趣点分布网格图
图11 第二次疫情网格图展示

S$.4.3 0OD 图比较

而 OD 图则更能说明问题，如图 12 所示，相比于政策刚刚实施的时间，35 个月
后居民外出的轨迹相比 5 个月前已经呈现很明显的上升趋势，尤其是在史泰登名超
过 50 次以上访问的 OD 线明显增加。所以综上所述，纽约州昌然通过政策限制了人
门出行热门地点的频率,但是最终随着时间的推移， 人们活动的范围最终还是呈绥慢
兽加的趋势，虽然几百次访问一个地点的情况减少了, 但最终访问地点的数量和平均
次数相较于第一次疫情爆发时已经有了明显的提升，这也是纽约州疫情最终再一次

vt

106

经历了爆发的

原因。

a) 2020-05-04 居民移动 OD 图

3.3
3.3.1

属:乡

最终
并
5 个点为公园

通枢纽〈2 个地铁站和 1 个机场)。

系统其它功
疫情期间纽约州访问

将它们的地理位置通

能简介

本三区一是

星取加

地点

过筛选，

利过系统以点的方式呈现出来，
和广场，3 个地点为

台忆上

oo 这可 月已

区显

E离，并且享

因为公园和广场提

元

公园和广场是人们在疫情期间上
共了开放空间和户外

多

如

b) 2020-12-28 居民移动 OD 图
图 12 第二次疫情 OD 图展示

我还选择出了纽约州整个疫情区间人们最爱访问的 20 个地点，
13 所示。在这
医院，3 个地点为消费中心和超市，3 个地点是交

文些地点中, 有

活动的机会

受户外环境的好处。而医院作为疫

前往医院接受医疗服务或进行 COVID-19 测试。这
人建，并积极寻求相关服务。

和医疗保
品和日间用

口
口品

加

百

行的热门选择之
，使人们能够保持社
期间关键的场所之一，
反映出人们在疫:

人们需:
青期间关注健康

|

E避
需

看求的地点。人们需要购买食品、

而
为了热门的出
尽管疫情期间

员和必要的旅行者。

行上且的地。        甬枢纽，包括地铁立
旅行减少，但仍有一部分人需:

交通

S$.$.2 ”基于地点类型的筛选

该系统;

提作

还提作
的类型值
2019 年4月第一

了依据地点
，就可以看到针对这种地点类
周的数据作为例子，地点类

类型筛选 POI 的功和

17

消费中心和超市是人们在疫情期|
药品和其他必需品，因此这些地点成
5和机场，是人们出行的重:
出行，例如医务人员、

本满足生活必需

中转点。
关键岗位工作人

巧，只要用户在窗口提供由 NAICS

型的所有地点可视化。下面我选取了来
型是服务业，呈现的可视化结果如图 14

自


图 13 纽约州整个疫情区间访问量最高的 20 个地点

所示。

不仅如此，系统还同时支持筛选后显示热力图、网格图和 OD 图，这里我用热力

图作为展示。通过图 15 我们可以看到，通过筛选功能，用户就可以很清晰地分析同

一和
迪村

地点居民访问的频率差异，如在这个例子中, 很多人都喜欢访问位于纽约市衣尼
[场中的和餐厅，几乎所有到机场的人都会经过这一个地点，这也是为什么热力图显

示这是唯一个颜色最为鲜艳的地点。

图 14 纽约州 2019-04-08 居民访问服务业地点分布

New York

图 1S 约州 2019-04-08 居民访问服务业地点分布

过比较 2019 年和 2020 年的POI 访问情况，可以看出 2020 年的旅行行为受到
了疫情的严重影响。此外，2020 年受疫情影响的旅行行为还具有以下特点。POI 访问
量的变化与新报告的新冠疫情病例趋势之间存在着很强的相关性。新冠疫情的爆发
大约发生在 2020 年 4 月上半月，这很可能是实施居家令的直接原因。相应地，对于
大多数 POI来说，访问量最低的时期也是在四月上半月。新冠疫情的恢复期也导致
了总访问量的增加。

另一方面，需要更完整的数据来进行更精确的分析。一些 POI 对应的访问数据
缺失。此外，原始数据的分类有时不准确,如 POI 条目的标签和城市属性。新报告病
例数量和 POI 访问量之间可能存在一些政策影响。此外，SafeGraph 的数据不能履盖
所有人，例如没有手机的儿童，因此数据的准确性有限。POI 访问数据为 2019 年至
2020 年。2021 年的数据将提高报告的完整性和时效性。

此项目最终实现了基本的为新冠疫情可视化系统，并使用了 Python 开发了后端，
以及利用 KeplerGL 库来实现地理数据可视化。以下是我对该系统的不足、优点以及
未来展望的总结。
6.1 不足之处

“数据更新和实时性: 新冠疫情数据是动态变化的，系统目前可能缺乏实时数据

更新机制。由于我完全使用python 来处理数据，导致系统只能单方面处理历史

数据而不能动态调整，为了更好地反映疫情的实时情况，后端应该与可靠的数
据源进行集成，以确保数据的及时性和准确性。

涝

。 用户交互和功能完善性;尽管系统具备基本的地图展示和数据可视化功能，但
在用户交互和功能方面仍有改进的空间。例如，增加用户自定义查询和筛选数
据的功能，提供更多交互式的图表和数据展示方式，以满足不同用户的需求。
6.2 ”优点
。数据可视化效果: 通过使用KeplerGL 库，系统实现了强大的地理数据可视化功
能。这使得用户能够直观地了解疫情数据的分布、趋势和相关信息，从而更好
地理解和分析疫情形势。

20

。可拓展性和扩展性: 系统采用了分层架构和模块化设计，使得后续的功能拓展
和系统扩展变得更加容易。通过合理的代码结构和接口设计，未来可以方便地
添加新的功能模块和集成更多的数据源。

6.3 ”未来展望

我对该系统的未来展望是希望增加数据增强和多维度展示，随着疫情数据的不
断积累，可以考虑引入更多的数据维度，如人口密度、医疗资源分布等，以便更全
地分析疫情情况。同时，可以探索更多的可视化方式，如热力图、时序动画等,来展
示数据的演变和趋势。同时，该系统也应具备用户定制和个性化。为了满足不同用户
的需求，该系统未来可以提供更多的用户定制和个性化功能。

21

[

[2]

[3]

[4

[5]

[6]

[]

[]

[10]

参考文献

HUANG J WANG H, FAN M, et al. Understanding the Impact of the COVID-19
Pandemic on Transportation-related Behaviors with Human Mobility Data[C7VOFL |]
//上人DD 20: Proceedings of the 20th ACM SIGKDD Imterational Conference on
Knowledge Discovery 久 Data Mining. New York, NY, USA: Assoclation for Com-
puting Machinery, 2020: 3443-3450 [2023-03-10]. https://doi.org/10.114S/3394486
.34128S6. DOI: 10.114S/3394486.341285S6.

CHANG S,PIERSON E,KOHP W,etal. Mobility network models ofCOVID-19 ex-
plain inequities and inform reopening[J/VOL]. Nature, 2021, S89(7840): 82-87 [2023-
0S-10]. https:/www.nature.comyarticles/S41986-020-2923-3.. DOI: 10.1038/s41S86
-020-2923-3.

LIU D, CLEMENTE L, POIRIER C, etal.A machine learning methodology for real-
time forecasting of the 2019-2020 COVYID-1959 outbreak using Internet Searches, newWsS
alerts, and estimates from mechanistic models[EB/VOL]. arXlv. 2020 [2023-0S-10].
http:/arxlv.org/abs/2004.04019.

AFZAL $ GOGHANI S, JENKINS-SMITH H C, et al. A_ Visual Analytics Based De-
cision Making Environment for COVID-19 Modeling and Visualization[C]/ /2020
IEEE Visualization Conference (VIS). 2020: 86-90. DOI: 10.1109/VIS47S14.2020.0
0024，

RIBEIRO M, NISIV, PRANDI C, et al. A data visualization interactive exploration
ofhuman mobility data during the COVID-19 outbreak': a case study[C]//2020 IEEE
Symposium on Computers and Communications (ISCC). 2020: 1-6. DOIL 10.1109/IS
CC30000.2020.9219552，

Places Data Curated for Accurate Geospatial Analytics | SafeGraph[EBVOL]. [2023-
0S-10]. https://www.safegraph.comy/.

ZHENGY,ZHANGL,XIE X,etal. Mining interesting locations and travel sequences
from GPS trajectories[C/VOL]/V/Proceedings of the 18th international conference on
World wide web. Madrid Spain: ACM, 2009: 791-800 [2023-0S-10]. https:/dlacm.o
rg/dol10.1145/1S26709.1326816. DOL: 10.1143/1S26709.1326810.

BUREAU U C. Census.gov[EB/VOL]. [2023-0S-10]. https:/www.census.gov/en.htm
1.

Welcome to Python.org[EB/OL]. 2023 [2023-05S-10]. https:/www.python.org/.
Array programming with NumPy | Nature[EB/OL]. [2023-03-10]. https:/www.natu
re.comnyarticles/sS41380-020-2049-2.

22

[1

[12]
[13]
[14]

[15]
[16]
[7]
[18]

[19]

[20]

[2

[22]

pandas - Python Data Analysis Library[EB/VOL]. [2023-0S-10]. https:/pPandas.pydat

a.0OT8/.
Home | deck.gl[EB/VOL]. [2023-0S-10]. https://deck.gl/.
React[EB/OL]. [2023-03-10]. https:/Treact.dev/.

WebGL 2.0 Specification[EBVOL]. [2023-03-10]. https:/registry.khronos.org/webgl
/Specs/latest/2.0/.

Spring Boot[EB/VOL]. [2023-0S-10]. https:/Sspring.lo/projects/spring-boot，
MYySQLIEB/VOL]. [2023-0S-10]. https:/www.mysql.comycny/.

keplergl[EB/VOL]. [2023-05S-10]. https:/Kkepler.gl/.

ECMA-262 - Ecma International[EBVOL]. [2023-0S-10]. https:/www.ecma-interna

tional.org/publications-and-standards/standards/ecma-262/.

Maps，geocoding, and navigation APIs 久 SDKSs | Mapbox[EB/VOL]. [2023-053-10|.

https:/www.mapbox.comy.

Google Maps[EB/VOL]. [2023-0S-10]. https:/www.google.itymaps?hl=it&tab=wl&o
utput=classic儿dg=brw，

Base Maps | deck.glI[EB/OL]. [2023-03-10]. https://deck.gl/docs/get-started/using-wW
ith-map.

COVID-19 | Department of Health[EB/VOL]. [2023-0S-10]. https://coronavirus.healt
h.ny.govhome.

23

致谢

在这篇学术论文的结束之际，我想借此机会向所有在完成可视化工作的过程中
给予我文持和帮助的人们致以深深的谢意。

首先，我要衷心感谢我的导师宋寻，他对我的研究充满了耐心和指导。他的专业
知识为我提供了宝贵的指导, 并在研究过程中不断激励和误励我。感谢您对我的批评
和建议，使我能够不断改进我的研究工作。

我还要感谢实验室的所有研究生, 他们在研究讨论、数据分析和实验设计等方面
给予了我极大的帮助。他们的合作精神和分享的精神使我能够在研究中得到及时的
反馈和建议。

此外，我要感谢那些数据集的收集者，他们的宝贵数据为我提供了研究的基础。
没有他们的支持和参与，我将无法进行这项研究。

我还要感谢我的家人和朋友, 他们一直在我身边给予我无尽的文持和莹励。他们
的理解和支持是我坚持不懈的动力。

最后，我要感谢本学术界对可视化研究的持续关注和支持。正是因为这个广泛的
学术社区，我们才能够相互学习、共同进步，并推动可视化领域的发展。

24
