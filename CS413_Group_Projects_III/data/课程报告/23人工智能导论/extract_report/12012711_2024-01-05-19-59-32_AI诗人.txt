CS103_Fall Project  
主题： AI 诗人  
小组成员：虞快  黄增荣  杨家鉴  徐璟源
1. 研究背景  
当前，人工智能被利用到各个领域，且表现出了十分优秀的效果，但在某些方面，例如中国文化中的诗
词部分，诸如 ChatGPT 等的 AI 在诗歌体裁、韵律以及主题等各个方面的表现均不能满足要求。因此，针
对这些部分进行 AI 设计是十分有必要的。当前，国内已经出现了一些以满足中国诗词创作为背景的模
型。
2. 模型复现  
ChatGPT         
欢度元旦 · 其一
    ——GPT4
欢度元旦，喜气盈门新岁到。
笑声洒满街巷间，人海翻腾如潮。
旧忧一扫尽，希望如灯照。
携手迎新春，万象更新悄 .
评价：不是古诗。
 欢度元旦 · 其二
        ——GPT4
欢庆佳节迎新年，
雪舞风歌度元旦。
万家灯火共欢笑，
四季平安祈愿圆。
评价 ：
字数符合要求，押韵未符合要求。
Mengzi (based on Transfer Text-to-Text Transformer)  
作诗 :
欢度元旦  
模仿 :
李清照
诗歌 :
年年爆竹报新晴，
喜气先随节物生。
莫道今宵无此景，
且看明日是新睛。平仄检查 :
年年爆竹报新晴
古: 平平仄仄爪平平
平平仄平仄平平
喜气先随节物生
古: 仄庆平平仄仄平
今: 仄仄平 ? 平仄平
莫道今宵无此景
古: 仄仄平平平仄仄
今: ? 仄平平平仄厂
目看明日是新晴
古: 仄通平仄人平平
今: 通通平仄仄平平
评价 ：
平仄正确，韵律符合，但会有用词重复，如 “ 新晴 ”
模型分析 ：
该模型基于 Mengzi 预训练模型。
模型训练 ：
训练前将训练诗句数据进行预处理清洗，过滤部分不规范格式或错误字符
将剩余数据进行编码，统一数据集输入格式
传入 transforms 的 T5ForConditionalGeneration 模型进
 
清华九歌  
 
评价：
平仄对应，韵律正确，诗词中提到 “ 新旧更替 ”“ 欢度 ” 符合关键词。 
训练办法：
半监督学习 + 对抗学习
评价因素：
流畅性（是否符合诗词结构）
上下文连贯性（主题与逻辑是否相符）
意义（诗歌传达的信息）
美感（是否有意境）
主题相关性（是否符合给定主题）
整体质量（对于是个的总体印象）
3. 环境配置  
清华九歌：
python>=3.7.0
pytorch>=1.3.1
sklearn>=0.19.2
matplotlib>=2.2.3 
 
4. 数据集预处理  
清华九歌：
将THU-CCPC 数据集中的训练集、验证集和测试集添加到 MixPoet/preprocess/ 目录中。
将THU-CRRD 数据集中的 pingsheng.txt 、 zesheng.txt 、 pingshui.txt 和 pingshui_amb.pkl 文件添加
到 MixPoet/data/ 目录中。Mengzi ：
Mengzi-T5 model （中文）
 
5. 执行命令  
清华九歌：
在MixPoet/preprocess/ 目录下，只需运行以下命令：
参数 n 表示用于半监督训练的未标记实例的数量。当使用提供的 CQCF 样本集时，我们建议 n 设置为
大约 150,000 。对于更大的标记数据集，可以设置更大的 n 。
运行 preprocess.py 之后，请将生成的 vocab.pickle 、 ivocab.pickle 、 semi_train.pickle 和
semi_valid.pickle 移动到 MixPoet/corpus/ 目录中，并将 test_inps.txt 和 training_lines.txt 移动到
MixPoet/data/ 目录中。
 
6. 训练  
在 MixPoet/codes/ 中，运行：
 
编码器和解码器将被预训练为去噪自动编码器，分类器将使用标记的诗歌进行预训练。然后，基于这些
预训练模块对  MixPoet 模型进行训练。
也可以编辑  MixPoet/codes/ config.py  来修改配置，例如隐藏大小、嵌入大小、数据路径、训练周期、
学习率等。
在训练过程中，会输出一些训练信息，例如：
训练和验证信息保存在  MixPoet/log/ 中。
7. 具体生成  
要在交互式界面中生成一首诗，请在  MixPoet/codes/ 中运行：from transformers import T5Tokenizer, T5ForConditionalGeneration
tokenizer = T5Tokenizer.from_pretrained("Langboat/mengzi-t5-base")
model = T5ForConditionalGeneration.from_pretrained("Langboat/mengzi-t5-base")
python preprocess.py --n 150000
python train.py然后可以输入关键字、长度和因子标签，然后得到生成的  pome ：
 
通过运行：
可以从候选光束中手动选择每条生成的线。
要使用包含一组关键字的输入测试文件生成诗歌，请运行：
其中  l = 5 或  7 ，表示  5 条字符线或  7 条字符线的四行诗。python generate.py -v 1
python generate.py -v 1 -s 1
python generate.py -m file -l 5 -i ../data/test_inps.txt -o outs_5char.txt我们操作实验获得的：  
8. 具体成品  
前端页面：
登录展示界面
操作平台：
后端部分界面展示：9. 展望  
随着人工智能（ AI ）技术的迅猛发展，其在各个领域的应用不断拓展，为我们的生活带来了前所未有的
便利和创新。在文学艺术领域， AI 的介入也逐渐引起了广泛的关注与讨论。本研究以探索 AI 在文学创作中
的独特应用为目标，致力于借助先进的计算机视觉技术和自然语言处理算法，构建了一个具有独创性的
系统。该系统具备上传图片识别功能，并以此为基础生成富有诗意的配图与诗歌，结合对全唐诗、全宋
词数据库的模糊匹配，为用户提供一种全新的文学创作体验。
通过本研究，我们成功地构建了一个融合先进技术与传统文学的创新系统。该系统在 AI 图像识别与创作
生成领域取得了显著的成果，为用户提供了一种全新的文学创作体验。通过与全唐诗、全宋词数据库的
有机结合，我们不仅在创作过程中注入了古典文学的精髓，也为现代文学创作带来了新的可能性。未
来，我们将进一步完善系统性能，拓展适用范围，并深入探讨 AI 在文学艺术中的更广泛应用。本研究为
文学与科技的融合开辟了一条新的道路，为未来的研究与应用提供了有益的参考。
10. 可能的解决方法  
1. 优化深度学习算法：进一步优化系统中的深度学习算法，以提高图像识别的准确性和生成诗歌的质
量。可以通过增加训练数据集、调整神经网络结构和优化超参数等手段，不断提升系统的性能。
2. 用户反馈与改进机制：引入用户反馈机制，建立用户体验的反馈循环。通过收集用户的评价和建
议，及时调整系统的算法和功能，以更好地满足用户的需求，提高系统的实用性和用户满意度。
3. 多样性创作模式：扩展系统的创作模式，引入更多的文学体裁和风格，使用户能够体验到更加丰富
多彩的文学创作。可以考虑加入散文、韵文等不同形式，以满足不同用户的创作偏好。优化深度学
习算法：进一步优化系统中的深度学习算法，以提高图像识别的准确性和生成诗歌的质量。可以通
过增加训练数据集、调整神经网络结构和优化超参数等手段，不断提升系统的性能。
4. 继续优化数据库匹配算法：深入研究改进全唐诗、全宋词数据库的模糊匹配算法，以提高系统对古
典文学的敏感性和匹配准确性，使生成的诗歌更加融合传统文学的精华。
5. 优化深度学习算法：进一步优化系统中的深度学习算法，以提高图像识别的准确性和生成诗歌的质
量。可以通过增加训练数据集、调整神经网络结构和优化超参数等手段，不断提升系统的性能。
