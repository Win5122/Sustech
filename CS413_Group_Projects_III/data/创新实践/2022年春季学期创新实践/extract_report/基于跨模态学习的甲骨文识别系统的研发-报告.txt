2022
基于跨模态学习的甲骨
文识别系统的研发
指导老师：刘江章晓庆
组员：桂宸麓孙清扬1一、研究背景
甲骨文是早在商周时期就已出现的文字，是世界上最古老的文字
之一，也是中国及东亚已知最早的成体系文字。甲骨文的研究不仅对
了解中国文字起源与演化十分重要，而且对中国乃至全世界文字文化
的溯源与传承有非比寻常的意义。甲骨文的发现不但促进了世界对于
人类早期文字的研究，也促进了对甲骨文研究的“甲骨学”学科的诞生。
刻有甲骨文的龟甲于1899年被清末官员、金石学家王懿荣首次发现，
这一重大发现随即引起中外学术界轰动。百年间，曾有数十次以甲骨
文相关历史材料为目标的考古发掘活动。迄今为止，作为甲骨文主要
发掘地的河南省安阳市殷墟已经出土了超过15万片的字甲骨[1]。2017
年12月26日，甲骨文成功入选“世界记忆名录”。甲骨文的重要性已
经得到中国乃至全世界的公认。
图1博物馆甲骨展品
尽管甲骨文自被发现之后，其重要性得到广泛承认，其衍生的甲
骨学发展迅速。然而作为距今3000年的文字体系，甲骨文字符的含2义仍然较难破译。在出土的15万余片甲骨中，大约包含4500个不同
的甲骨字符，然而仅有2000个左右被成功破译解读[2],破译量不足二
分之一。目前甲骨文识别主要依赖于学科专家的识别工作，往往需要
专家有丰富的甲骨文有关知识与经验。这种专家识别方式的成本较高
且效率较低。而对于大众来说，目前大部分普通人对甲骨文认识较为
浅显，仅仅停留在它作为文字符号的层面上，很少了解文字涵义。这
种现象的主要原因是大众很少受到甲骨知识熏陶。
图2中国文字博物馆面向社会面征集甲骨文破译成果的公告
近年来，人工智能技术已经成功应用于很多领域，如图像识别和
自然语言处理。本项目拟与考古专家合作，基于多模态甲骨文图像和
利用人工智能技术研发一个先进的跨模态甲骨文智能识别系统，加快
考古专家识别未破译甲骨文效率并普及甲骨文的大众教育，具有较高
的研究价值和应用意义。3二、文献调研
经过调研，发现多篇使用人工智能辅助汉字识别的研究。基于这
些研究使用的技术与方法，可大致分为利用机器学习进行文字识别与
利用深度学习进行文字识别两类。
就机器学习进行文字识别的工作而言，刘永革等人《基于SVM
的甲骨文字识别》[3]颇具代表性。该研究选择使用支持向量机SVM完
成汉字分类任务，训练集包含1300张图片，15个单字字符，其识别
流程如图3。然而，这项研究的局限性也比较明显。其一，其数据集
的样本量较少，且均来自甲骨摹本，是一个单模态的数据集；其二，
其分类任务较简单，实验结果不具有复杂情况下的普适性；其三，该
研究未使用深度学习方法，深度学习方法实现简单，识别精度高，目
前在文字识别领域被广泛使用。
图3《基于SVM的甲骨文字识别》识别流程图4对于使用深度学习方法进行文字识别的工作，刘芳等人的《基于Mask
R-CNN的甲骨文拓片的自动检测与识别研究》[4]较为新颖。该研究选
取约3000张甲骨文拓片建立数据集。为了丰富数据集样本容量，该
研究应用了一些简单图像变换以对原图像处理，得到新的训练与测试
样本。该研究基于MaskR-CNN建立识别模型，并应用TripletLoss
等算法对识别效果进行优化，其识别流程如图4。然而该研究也有一
定局限性。其一，其同样存在数据集样本量不够大的问题；其二，数
据集样本不均衡，常用字出现频率较高，而生僻字仅包含个别样本；
其三，其数据集均采用甲骨拓片来构建，因此，该研究建立的是单模
态的神经网络。
图4《基于MaskR-CNN的甲骨文拓片的自动检测与识别研究》识别流程图5三、项目计划
（一）研究内容
本项目拟基于甲骨拓片与甲骨摹本图像，并利用人工智能技术研
发一种跨模态学习的甲骨文智能识别系统，用于普及甲骨文教育和辅
助考古专家识别尚未破译的甲骨文。
拟基于以下三个研究内容来构建基于跨模态学习的甲骨文智能
识别系统:
1.跨模态甲骨文数据库构建
目前甲骨文字图像可以分为甲骨摹本图像与甲骨拓片图像两类。
甲骨拓片指使用宣纸与墨汁，将龟甲、兽骨上的纹路、图样拓印下来
的一种技术。拓片作为我国一项古老的传统技艺，是千百年来传承我
国文化艺术的一种载体。
甲骨摹本指甲骨学者手工临摹甲骨纹路得到的摹本。这种保存形
式较甲骨照片更为清晰，修复了甲骨文图像的残缺与噪声。然而甲骨
摹本需要较多人力物力得到摹本，同时对参与临摹的学者专业水平要
求较高。
由于缺少训练样本，仅使用甲骨拓片图像对模型进行训练很难取
得较高的识别精度[5]。同时,由于甲骨摹本具备一些甲骨拓片文字类别
没有的训练样本,甲骨文字的增量识别也是辅助甲骨文字专家进行语
言研究的重要手段。因此，本研究构建了一个基于甲骨摹本与甲骨拓
片的跨模态甲骨文数据库，从而提高模型的识别精度。6
图5甲骨摹本（左）与甲骨拓片（右）
2.智能甲骨文识别框架
根据常识，汉字的偏旁一定程度反映了汉字的含义，且人类在认
识汉字时根据偏旁进行分类，如“芷”、“芬”、“芳”等字具有相同的偏旁，
且都与花草相关。同样地，面对不认识的汉字，人类可根据偏旁推断
含义，如“芅”。虽然该字较为生僻，但仍可根据其偏旁推知其与植物
有一定相关性。人类在观察汉字时先注意到较重要的偏旁，以此辅助
识别汉字，这启发了本研究在建立识别模型时使用注意力机制。
人类能够自然而有效地发现复杂场景中的显著区域，如图6。基
于这一观察，注意力机制被引入计算机视觉，目的是模仿人类视觉系
统的这方面，将注意力转移到图像最重要区域而忽略无关部分的方
法称为注意机制。注意力机制基于数据域可以分为通道注意、时间
注意、空间注意、分支注意，空间时间注意、空间通道注意[6]，如
图7。7
图6人类的视觉注意力
图7注意力机制基于数据域的分类
3.智能甲骨文识别系统
图8是甲骨文识别系统的实现流程。识别系统主要由4部分组成：
（1）图像上传模块：用户将待识别的甲骨文图像进行上传。8（2）图像处理模块：将图片去噪及尺寸归一化。
（3）图像识别模块：利用已经训练好的分类器对甲骨文图像进
行识别。
（4）结果输出模块：将预测结果概率分布最大的3张图片及对
应简体字输出到前端界面。
图8甲骨文识别系统实现流程
（二）项目阶段时间规划
1.2.15-3.31背景调研，知识学习与建立甲骨数据集
(1)与考古专家讨论研究方法和收集相关资料；
(2)学习深度学习及相关代码库知识；
(3)甲骨数据采集与建立数据集。92.4.1-4.30进一步扩充数据集与训练识别模型
(1)进一步扩充数据集，形成足够大的训练样本；
(2)建立甲骨文识别模型并提高识别效果。
3.5.1-final提高模型识别效果与设计前端展示界面
(1)不断改进模型，提高模型的识别准确率并减少推断时间；
(2)设计前端展示网页并不断美化。
四、项目总结
（一）跨模态甲骨文数据库构建
（1）甲骨拓片的爬取
由于目前几乎没有甲骨拓片的公开数据集，因此本研究需自行创
建甲骨拓片数据集作后续研究使用。选取甲骨文拓片书籍《甲骨金文
拓本精选释译》，将书籍中拓片图像手动爬取并进行数据标注。
（2）甲骨拓片的标注
本研究对爬取的拓片进行了手动标注，标注拓片约900张。该标
注任务难度较大，首先，《甲骨金文拓本精选释译》中的字符标注为
手写体汉字（如图9）。其次，甲骨拓片图像与字符标注需自行对应。
由于部分甲骨拓片存在破损严重的情况，因此在标签中标注了字
符的句间位置，即该字符位于第几篇文章中的第几个字，以便后续可10能进行的使用NLP的方法根据上下文对字符推断的研究。
图9甲骨拓片书籍中标注示意
值得注意的是，部分甲骨文字并没有简体字对应的字符，因此采
取“字海”网站（一个收录了《康熙字典》全部字符并编号的网站）的
编号作为标注。此外，还存在一个甲骨字符对应多个简体字的情况，
暂时使用多个简体字做标注。
（3）甲骨拓片预处理
甲骨拓片往往噪声大，边缘不够清晰。为提高甲骨拓片的训练效
率与识别准确率，本研究需对甲骨拓片进行数据预处理，以清洗甲骨
拓片图像的噪音，并对甲骨拓片的大小归一化，并且保留其形态学信
息。
相比将图像中的像素点传入神经网络进行训练，本研究尝试先对
甲骨拓片进行边缘检测、特征提取，然后以图像的特征进行训练。因
此本研究尝试了基于甲骨拓片的图像特征提取的创新探究。手写文字11图像的边缘特征多为简单的直线和曲线，因此适合用贝塞尔曲线拟合。
使用贝塞尔曲线拟合可以降低图像特征的参数量，拓片图像有几百个
像素点，而三阶贝塞尔曲线约具有10个参数。
因此本研究先采用Caddy算法进行图像边缘检测，通过“拐点”
将边缘进行分割为多条曲线，然后使用贝塞尔曲线分别进行拟合。本
研究还尝试了使用多线程加速单张图片处理的过程。然而在图片处理
中，出现了分辨率过低与图像拐点密集问题。为了更好地进行边缘分
割，本研究还做了放大光滑实验，探究了超分辨率算法。
在进行超分辨率算法时，对于放大倍数、模糊核等可选取的超参
数存在一个多参数多目标优化的问题。本研究还遍历了可选取参数的
解，找到了一组极具鲁棒性的超参数，可以使得各张图片的形态学特
征提取效果最好。
在设计边缘分割算法时，需要使得边缘像素点序列化。为了探索
具有鲁棒性的算法，固定左上一点为起点，做修改后的广度优先探索。
目前，能将闭合边缘，宽度不超过2像素的边缘序列化后使前后两点
彼此相邻。然而，更为复杂的边缘分割，如汉字中存在分支的字形，
需要更为复杂的算法，目前算法的时间复杂度为O（n）。
为了更好地以贝塞尔曲线拟合边缘。将序列分为多段，以用更低
阶的贝塞尔曲线拟合。线性拟合的R2会出现震荡的问题，因此不能
用二分搜索解决，于是增加限制，要求每个点的xy误差值不大于3，
然后使用二分法。
贝塞尔四阶曲线由四个点与变量t∈[0,1]控制，该多项式方程可12以通过最小二乘法的线性拟合求出系数，然后利用系数解出贝塞尔曲
线的起终点与控制点。
将提取到的甲骨拓片信息送入神经网络学习，识别准确率约为
2%，误差大于2万，均不理想。这是因为深度学习的方法对“位置”或
者“等位性”更加敏感，而对边缘特征不敏感。后改进网络，使用共享
参数的方式，识别准确率达到4%。由于该分类任务为558类，因此
随机分类的识别准确率约为0.2%，可见使用边缘特征让网络进行学习
的方式还是有一定潜力的，未来我们将继续探索。
（二）智能甲骨文识别框架
(1)VisionPermutator
基于对汉字的认知，汉字存在一定空间结构特征，例如：上下结
构、左右结构、半包围结构等。这些汉字的空间结构可以辅助汉字识
别，以一些左右结构的字为例，仅凭借字的左半边或右半边信息即可
推断其具体字形。并且，不同区域对于汉字识别的重要性可能不同。
因此，我们联想到在识别汉字时可以将汉字切成“小块”处理。
这种处理汉字的方法与VisionPermutator（ViP）[7]的核心思想相
近。其处理图像识别任务时通过将图片“切片”以进行编码，这种处理
图像的方式可以充分利用汉字的空间结构特征；此外，ViP是一种类
MLP的神经网络结构，其参数量较少，因此其训练与推断更为高效。
Permutatorblock是ViP的核心结构，这正是ViP与其他类MLP13结构，如Mlp-mixer[8]的区别的核心之处。在处理token时，Mlp-mixer
在空间维度将token展平，然后在空间维度线性投影以编码空间信息，
其输入是二维的，导致了部分空间信息的丢失。与之不同，ViP保持
了原来的空间维度，以三维向量作为输入，分别沿着宽和高两个维度
编码空间信息，保证token具有特定方向的信息，避免了空间信息的
丢失。
图10ViP结构示意图
经过一定的数据预处理工作后，根据现有甲骨文数据集中的文字
种类进行分类，统计各类字符的样本数量情况。
经过运行相关代码进行统计，该数据集包含18000张图像，558
种单字，统计结果如图11。然后，基于该甲骨摹本数据集，本研究
设计相关程序将数据集划分为训练集与测试集。本研究还编码了甲骨
文字母表，用于划定推断范围。14
图11现有数据集样本类型统计
本研究尝试以多种网络搭建识别框架，其中VGGNet在测试集上
的准确率为87.731%，在测试集上准确率为80.105%(200epoch)。
ResNet的准确率分别为88.539%与80.476%(200epoch)，ResNet-SE:
的准确率分别为90.801%/81.891%(200epoch)，如图12。
而以ViP搭建识别框架时遇到了一定的问题。该网络在训练集表
现很好，识别准确率有94.83%。然而在测试集上表现不佳，仅有50%
左右。经过探索，我们发现ViP的训练依赖于预训练模型。
于是我们从ViP处理图片的方式中汲取了思路，依旧采用将汉字
分块处理的方式，并使用注意力机制中的协调注意力（Coordination
Attention）[9]。15
图12ResNet-SE的训练过程示意
于是我们从ViP处理图片的方式中汲取了思路，依旧采用将汉字
分块处理的方式，并使用注意力机制中的协调注意力（Coordination
Attention）[9]。
以SE（Squeezeandexcitation）、CBAM（ConvolutionalBlock
AttentionModule）与CA（CoordinationAttention）做对比，如图
13。SE只考虑了通道上的注意力，空间上的信息被GAP直接池化为
1∗1的值，损失了空间信息。而CBAM虽然同时考虑了通道注意力
与空间注意力，然而其感受野为7*7，不足够感受全局信息。而CA
通过双分支编码空间信息，融合了水平和竖直方向的大感受野，空间
信息得以保留，同时融合了空间的注意力和通道的注意力，因此可以
更有效编码空间信息。
我们以将汉字切块处理的思路，并基于CA改进了甲骨文识别框
架，如图14。CA中编码空间信息使用两个分支，分别沿着长与宽，16将空间信息压缩为“一条线”，而改进后的甲骨文识别框架分别沿着图
片上半部分与下半部分编码空间信息。这样能更好地利用汉字特有的
空间信息。
图13SE、CBAM与CA的对比
图14基于CA的甲骨文识别框架
这种改进后的甲骨文识别框架在训练集上达到94.967%的识别准
确率，在测试集上准确度达到84.358%（图15）。可以看出，这个结
果是优于RESNet-SE的。
17
图15基于CA的甲骨文识别框架的识别效果
（三）智能甲骨文识别系统
(1)甲骨文化展示界面
为科普甲骨文化，本研究制作了甲骨文科普网页。该网页包含甲
骨文科普短视频、甲骨文科普文字、甲骨文科普音频等多种展示形式。
此外，该网页还科普了甲骨文简单字形，旨在提升公众对甲骨文
化的兴趣，如图16。
图16甲骨文字形科普
(2)甲骨文识别窗口
该识别窗口基于nodejs实现。首先在后台运行node服务器，服
务器将会接收前端传入的图片，并上传到前端展示。后端的甲骨文识18别程序同时会读入图片，并且进行识别，并将识别的结果反馈到前端，
前端将在指定位置展示识别结果与简体字图片，便于公众对比字形变
化，演示如图17。
图17甲骨文识别窗口演示
五、下一阶段目标展望
1.尝试使用拓片特征信息；
2.继续改进识别模型；
3.继续美化识别平台